import*as e from"react";import{forwardRef as a,useState as t}from"react";import{Slot as r}from"@radix-ui/react-slot";import{cva as o}from"class-variance-authority";import{clsx as s}from"clsx";import{twMerge as i}from"tailwind-merge";import{FontAwesomeIcon as l}from"@fortawesome/react-fontawesome";import{jsxs as n,jsx as d,Fragment as c}from"react/jsx-runtime";import*as m from"@radix-ui/react-popover";import{config as p,library as f}from"@fortawesome/fontawesome-svg-core";import{faCheck as u,faXmark as h,faFilter as g}from"@fortawesome/free-solid-svg-icons";import*as b from"@radix-ui/react-select";import*as x from"@radix-ui/react-switch";import*as N from"@radix-ui/react-tooltip";import{Command as y}from"cmdk";import"react-day-picker";function w(...e){return i(s(e))}const v=({className:e})=>d(l,{icon:"spinner",className:w("animate-spin text-primary-600",e)}),k=a(({selected:e,leftIcon:a,rightIcon:t,className:r,iconClassName:o,placeholder:s,maxWidth:i="max-w-20",...c},m)=>n("button",{ref:m,className:w("flex items-center border-b pb-1 px-2 text-gray-500 text-sm font-light cursor-pointer min-w-0 overflow-hidden",r),...c,children:[n("div",{className:"flex text-start items-center justify-center truncate min-w-0",children:[a&&d(l,{icon:a,className:w("h-3 w-3 text-secondary-500 flex-shrink-0",o)}),d("span",{className:`truncate min-w-0 ${i} ${a?"pl-1":""}`,children:e&&e.length?Array.isArray(e)?`${e.length} selected`:e.label:s})]}),t&&d(l,{icon:t,className:"h-3 w-3 pl-1 flex-shrink-0"})]}));k.displayName="SelectTrigger";const C=o("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary-700 text-primary-50 shadow hover:bg-primary-800",danger:"bg-red-700 text-red-50 shadow-sm hover:bg-red-800",outline:"border border-input shadow-sm hover:bg-gray-100",secondary:"bg-secondary-700 text-secondary-50 shadow-sm hover:bg-secondary-800",ghost:"hover:bg-primary-50",link:"text-primary-800 underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),S=a(({className:e,variant:a,size:t,asChild:o=!1,loading:s=!1,children:i,...l},m)=>{const p=o?r:"button",f=o?n("span",{className:"inline-flex items-center",children:[s&&d(v,{className:"mr-2 h-4 w-4 animate-spin text-current"}),i]}):n(c,{children:[s&&d(v,{className:"mr-2 h-4 w-4 animate-spin text-current"}),i]});return d(p,{className:w(C({variant:a,size:t,className:e})),title:l.title,ref:m,disabled:l.disabled||s,...l,children:f})});S.displayName="Button";e.forwardRef(({className:e,type:a,...t},r)=>d("input",{type:a,className:w("flex w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-0 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t})).displayName="Input";const R=m.Root,I=m.Trigger,T=e.forwardRef(({className:e,align:a="center",sideOffset:t=4,...r},o)=>d(m.Portal,{children:d(m.Content,{ref:o,align:a,sideOffset:t,className:w("bg-popover text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));T.displayName=m.Content.displayName,p.autoAddCss=!1,f.add(u,h,g);e.forwardRef(({iconClassName:e,className:a,isIconShow:t=!0,children:r,...o},s)=>n(b.Trigger,{ref:s,className:w("flex h-9 w-full items-center whitespace-nowrap rounded-sm border bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...o,children:[d(b.Icon,{asChild:!0,children:t&&d(l,{icon:"sort",className:w("mr-2 w-4 h-4",e)})}),r]})).displayName=b.Trigger.displayName;const j=e.forwardRef(({className:e,...a},t)=>d(b.ScrollUpButton,{ref:t,className:w("flex justify-center items-center py-1 cursor-default",e),...a,children:d(l,{icon:"chevron-up"})}));j.displayName=b.ScrollUpButton.displayName;const L=e.forwardRef(({className:e,...a},t)=>d(b.ScrollDownButton,{ref:t,className:w("flex justify-center items-center py-1 cursor-default",e),...a,children:d(l,{icon:"chevron-down"})}));L.displayName=b.ScrollDownButton.displayName;e.forwardRef(({className:e,children:a,position:t="popper",...r},o)=>d(b.Portal,{children:n(b.Content,{ref:o,className:w("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-sm border bg-white text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===t&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:t,...r,children:[d(j,{}),d(b.Viewport,{className:w("p-1","popper"===t&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),d(L,{})]})})).displayName=b.Content.displayName;e.forwardRef(({className:e,...a},t)=>d(b.Label,{ref:t,className:w("px-2 py-1.5 text-sm font-semibold opacity-70",e),...a})).displayName=b.Label.displayName;e.forwardRef(({className:e,children:a,...t},r)=>n(b.Item,{ref:r,className:w("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-slate-100 focus:text-primary-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...t,children:[d("span",{className:"flex absolute right-2 justify-center items-center w-3.5 h-3.5",children:d(b.ItemIndicator,{children:d(l,{icon:"check",className:"w-4 h-4"})})}),d(b.ItemText,{children:a})]})).displayName=b.Item.displayName;e.forwardRef(({className:e,...a},t)=>d(b.Separator,{ref:t,className:w("-mx-1 my-1 h-px bg-muted",e),...a})).displayName=b.Separator.displayName;e.forwardRef(({className:e,thumbStyle:a,...t},r)=>d(x.Root,{className:w("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary-600 data-[state=unchecked]:bg-gray-400",e),...t,ref:r,children:d(x.Thumb,{className:w("pointer-events-none block h-5 w-5 rounded-full bg-primary-300 shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0",a)})})).displayName=x.Root.displayName;const z=({icon:e,children:a,tooltipText:t,side:r="top",className:o})=>n(N.Root,{delayDuration:0,children:[d(N.Trigger,{asChild:!0,children:n("span",{children:[e&&d(l,{icon:e,className:o}),a]})}),n(N.Content,{side:r,className:"bg-black text-white text-xs rounded px-2 py-1 shadow-md",children:[t,d(N.Arrow,{className:"fill-black"})]})]}),O=N.Provider,A=y,B=e.forwardRef((e,a)=>{const{className:t,...r}=e;return d(y.List,{ref:a,className:w("max-h-[340px] overflow-y-auto overflow-x-hidden scroll-smooth scroll-padding",t),...r})});B.displayName=y.List.displayName;const P=e.forwardRef((e,a)=>{const{className:t,...r}=e;return d(y.Input,{ref:a,className:w("flex h-10 w-full border-input bg-background px-3 py-2 text-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-0 disabled:cursor-not-allowed disabled:opacity-50",t),...r})});P.displayName=y.Input.displayName;const D=e.forwardRef((e,a)=>{const{className:t,...r}=e;return d(y.Item,{ref:a,className:w("relative flex cursor-default select-none items-center px-2 py-1.5 text-sm outline-none transition-colors duration-200 ",t),...r})});D.displayName=y.Item.displayName;const _=e.forwardRef((e,a)=>{const{className:t,...r}=e;return d(y.Group,{ref:a,className:w("overflow-hidden text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-0 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",t),...r})});_.displayName=y.Group.displayName;e.forwardRef((e,a)=>{const{className:t,...r}=e;return d(y.Separator,{ref:a,className:w("-mx-1 h-px bg-border",t),...r})}).displayName=y.Separator.displayName;e.forwardRef(({className:e,...a},t)=>d(y.Dialog,{ref:t,className:w("fixed inset-0 z-50 flex items-start justify-center p-4 pt-[25vh] backdrop-blur-md",e),...a,children:d("div",{className:"w-full max-w-md rounded-md bg-background shadow-lg",children:a.children})})).displayName=y.Dialog.displayName;const G=e.forwardRef(({className:e,...a},t)=>d("div",{ref:t,className:w("flex items-center justify-center p-4 text-sm text-muted-foreground",e),...a,children:"No results found."}));G.displayName="CommandEmpty";const F=e=>"object"==typeof e?e.path:e,V=({selected:e,onRemove:a,onClearAll:t})=>{const r=e.slice().sort((e,a)=>{const t="object"==typeof e?e.label:e,r="object"==typeof a?a.label:a;return t.localeCompare(r)});return n("div",{className:"relative px-4 pt-4 pb-2 border-t pr-8 w-full overflow-hidden",children:[d("div",{className:"flex flex-wrap gap-2 w-full",children:r.map(e=>n("span",{onClick:t=>{t.stopPropagation(),a(e)},className:"flex items-center bg-primary-400/10 text-[10px] px-1 py-0.5 rounded-sm cursor-pointer hover:bg-gray-200 transition",children:[d("span",{className:"truncate max-w-[120px]",children:"object"==typeof e?e.label:e}),d(l,{icon:"close",className:"h-2 w-2 ml-1 text-primary-600 flex-shrink-0"})]},F(e)))}),d("div",{onClick:e=>{e.stopPropagation(),t()},className:"absolute top-1 right-2 cursor-pointer",children:d(z,{tooltipText:"Clear all",icon:"close",className:"h-4 w-4 mr-1 text-gray-500 hover:text-gray-800 transition"})})]})},$=({options:e,selected:a,onOptionSelect:t,className:r,multiple:o,isSmall:s,optionTooltip:i})=>{const c=e.slice().sort((e,a)=>{var t,r;const o=(null===(t=e.label)||void 0===t?void 0:t.toLowerCase())??"",s=(null===(r=a.label)||void 0===r?void 0:r.toLowerCase())??"";return o.localeCompare(s)});return d("div",{className:w(r),children:c.map((e,r)=>{if(e.isLoading)return d(D,{value:e.label,className:"px-4 py-2 text-sm text-gray-500 cursor-default",disabled:!0,children:n("div",{className:"flex items-center gap-2",children:[d(v,{className:"w-4 h-4"}),d("span",{children:e.label})]})},"loading-state");const c=o||s?a.some(a=>F(a)===F(e)):a&&F(a)===F(e);if(e.options)return d(_,{className:"px-2 mt-2 overflow-visible",heading:d("span",{className:"cursor-default font-bold text-sm text-gray-800 whitespace-nowrap",children:e.label}),children:d($,{options:e.options,selected:a,onOptionSelect:t,multiple:o,isSmall:s,optionTooltip:i})},r);{const a=d(D,{value:e.label,className:w("px-4 cursor-pointer hover:bg-gray-100 font-light border-b border-gray-100 whitespace-nowrap",c&&"bg-primary-400/10"),onSelect:()=>t(e),children:n("div",{className:"flex justify-between items-center w-full gap-2",children:[d("span",{className:"whitespace-nowrap",children:e.label}),c&&d(l,{icon:"check",className:"text-primary-600 h-3 w-3 ml-2 flex-shrink-0"})]})},r);if(i){const t="function"==typeof i?i(e):null==i?void 0:i[e.path];return t?d(z,{tooltipText:t,side:"right",children:a},r):a}return a}})})},E=({options:e,selected:a=[],onSelect:r,trigger:o,children:s,className:i,multiple:l=!1,isSearchable:c=!0,isSmall:m=!1,isShadow:p=!0,showSelectedSummary:f=!0,onSearchChange:u,searchPlaceholder:h="Search...",shouldFilter:g=!0,optionTooltip:b,searchFields:x=["label"]})=>{const[N,y]=t(!1),[v,k]=t(""),C=g?((e,a)=>{if(!a)return e;const t=a.toLowerCase(),r=(e=>{const a=[],t=e=>{e.forEach(e=>{e.options?t(e.options):e.isLoading||a.push(e)})};return t(e),a})(e).filter(e=>x.some(a=>{var r;return null===(r=e[a])||void 0===r?void 0:r.toLowerCase().includes(t)})),o=new Set(r.map(e=>e.path)),s=e=>e.map(e=>{if(e.options){const t=((e,a)=>e.toLowerCase().includes(a.toLowerCase()))(e.label,a);if(t)return{...e,matchedGroup:!0};const r=s(e.options);return r.length>0?{...e,options:r,matchedGroup:!1}:null}return e.isLoading||o.has(e.path)?e:null}).filter(Boolean);return s(e)})(e,v):e,S=e=>{if(l){const t=a.some(a=>F(a)===F(e))?a.filter(a=>F(a)!==F(e)):[...a,e];r(t)}else r(e),y(!1)};return d("div",{className:w("relative flex",i),children:n(R,{open:N,onOpenChange:y,children:[d(I,{asChild:!0,className:"flex items-center gap-1 text-gray-500 text-sm "+(m?"border-none px-1 text-xs py-0":"border-b px-2 py-1"),children:s||o(a)}),d(T,{align:"start",sideOffset:4,className:w("bg-white border w-auto max-w-fit",!p&&"shadow-none"),children:d(O,{children:n(A,{shouldFilter:!1,className:"w-full",children:[c&&d(P,{placeholder:h,className:"px-4 py-2 mb-2 border-b border-gray-300",onValueChange:e=>{k(e),u&&u(e)}}),n(B,{children:[d($,{options:C,selected:a,onOptionSelect:S,multiple:l,isSmall:m,optionTooltip:b}),l&&a.length>0&&("always"===f||!1!==f&&e.length>6)&&d(V,{selected:a,onRemove:S,onClearAll:()=>r([])}),0===C.length&&d(G,{})]})]})})})]})})};export{E as RichSelect};
//# sourceMappingURL=index.esm.js.map
