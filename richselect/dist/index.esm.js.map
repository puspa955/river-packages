{"version":3,"file":"index.esm.js","sources":["../../core/dist/index.esm.js","../src/RichSelect.js"],"sourcesContent":["import*as e from\"react\";import{forwardRef as a}from\"react\";import{Slot as t}from\"@radix-ui/react-slot\";import{cva as r}from\"class-variance-authority\";import{clsx as s}from\"clsx\";import{twMerge as o}from\"tailwind-merge\";import{FontAwesomeIcon as i}from\"@fortawesome/react-fontawesome\";export{FontAwesomeIcon as FAIcon}from\"@fortawesome/react-fontawesome\";import{jsxs as n,jsx as d,Fragment as l}from\"react/jsx-runtime\";import*as c from\"@radix-ui/react-popover\";import{config as m,library as f}from\"@fortawesome/fontawesome-svg-core\";import{faCheck as p,faXmark as u,faFilter as h}from\"@fortawesome/free-solid-svg-icons\";import*as g from\"@radix-ui/react-select\";import*as y from\"@radix-ui/react-switch\";import*as x from\"@radix-ui/react-tooltip\";import{Command as b}from\"cmdk\";import{DayPicker as N}from\"react-day-picker\";function w(...e){return o(s(e))}const v=({className:e})=>d(i,{icon:\"spinner\",className:w(\"animate-spin text-primary-600\",e)}),k=a(({selected:e,leftIcon:a,rightIcon:t,className:r,iconClassName:s,placeholder:o,maxWidth:l=\"max-w-20\",...c},m)=>n(\"button\",{ref:m,className:w(\"flex items-center border-b pb-1 px-2 text-gray-500 text-sm font-light cursor-pointer min-w-0 overflow-hidden\",r),...c,children:[n(\"div\",{className:\"flex text-start items-center justify-center truncate min-w-0\",children:[a&&d(i,{icon:a,className:w(\"h-3 w-3 text-secondary-500 flex-shrink-0\",s)}),d(\"span\",{className:`truncate min-w-0 ${l} ${a?\"pl-1\":\"\"}`,children:e&&e.length?Array.isArray(e)?`${e.length} selected`:e.label:o})]}),t&&d(i,{icon:t,className:\"h-3 w-3 pl-1 flex-shrink-0\"})]}));k.displayName=\"SelectTrigger\";const R=(e,a,t,r,s,o)=>d(k,{selected:e,leftIcon:a,rightIcon:t,className:r,iconClassName:s,placeholder:o,maxWidth:\"flex-1\"}),_=r(\"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50\",{variants:{variant:{default:\"bg-primary-700 text-primary-50 shadow hover:bg-primary-800\",danger:\"bg-red-700 text-red-50 shadow-sm hover:bg-red-800\",outline:\"border border-input shadow-sm hover:bg-gray-100\",secondary:\"bg-secondary-700 text-secondary-50 shadow-sm hover:bg-secondary-800\",ghost:\"hover:bg-primary-50\",link:\"text-primary-800 underline-offset-4 hover:underline\"},size:{default:\"h-9 px-4 py-2\",sm:\"h-8 rounded-md px-3 text-xs\",lg:\"h-10 rounded-md px-8\",icon:\"h-9 w-9\"}},defaultVariants:{variant:\"default\",size:\"default\"}}),I=a(({className:e,variant:a,size:r,asChild:s=!1,loading:o=!1,children:i,...c},m)=>{const f=s?t:\"button\",p=s?n(\"span\",{className:\"inline-flex items-center\",children:[o&&d(v,{className:\"mr-2 h-4 w-4 animate-spin text-current\"}),i]}):n(l,{children:[o&&d(v,{className:\"mr-2 h-4 w-4 animate-spin text-current\"}),i]});return d(f,{className:w(_({variant:a,size:r,className:e})),title:c.title,ref:m,disabled:c.disabled||o,...c,children:p})});I.displayName=\"Button\";const C=e.forwardRef(({className:e,type:a,...t},r)=>d(\"input\",{type:a,className:w(\"flex w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-0 disabled:cursor-not-allowed disabled:opacity-50\",e),ref:r,...t}));C.displayName=\"Input\";const S=c.Root,z=c.Trigger,j=e.forwardRef(({className:e,align:a=\"center\",sideOffset:t=4,...r},s)=>d(c.Portal,{children:d(c.Content,{ref:s,align:a,sideOffset:t,className:w(\"bg-popover text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",e),...r})}));j.displayName=c.Content.displayName,m.autoAddCss=!1,f.add(p,u,h);const T=g.Root,D=g.Group,A=g.Value,B=e.forwardRef(({iconClassName:e,className:a,isIconShow:t=!0,children:r,...s},o)=>n(g.Trigger,{ref:o,className:w(\"flex h-9 w-full items-center whitespace-nowrap rounded-sm border bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",a),...s,children:[d(g.Icon,{asChild:!0,children:t&&d(i,{icon:\"sort\",className:w(\"mr-2 w-4 h-4\",e)})}),r]}));B.displayName=g.Trigger.displayName;const L=e.forwardRef(({className:e,...a},t)=>d(g.ScrollUpButton,{ref:t,className:w(\"flex justify-center items-center py-1 cursor-default\",e),...a,children:d(i,{icon:\"chevron-up\"})}));L.displayName=g.ScrollUpButton.displayName;const O=e.forwardRef(({className:e,...a},t)=>d(g.ScrollDownButton,{ref:t,className:w(\"flex justify-center items-center py-1 cursor-default\",e),...a,children:d(i,{icon:\"chevron-down\"})}));O.displayName=g.ScrollDownButton.displayName;const G=e.forwardRef(({className:e,children:a,position:t=\"popper\",...r},s)=>d(g.Portal,{children:n(g.Content,{ref:s,className:w(\"relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-sm border bg-white text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\"popper\"===t&&\"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",e),position:t,...r,children:[d(L,{}),d(g.Viewport,{className:w(\"p-1\",\"popper\"===t&&\"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"),children:a}),d(O,{})]})}));G.displayName=g.Content.displayName;const P=e.forwardRef(({className:e,...a},t)=>d(g.Label,{ref:t,className:w(\"px-2 py-1.5 text-sm font-semibold opacity-70\",e),...a}));P.displayName=g.Label.displayName;const V=e.forwardRef(({className:e,children:a,...t},r)=>n(g.Item,{ref:r,className:w(\"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-slate-100 focus:text-primary-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",e),...t,children:[d(\"span\",{className:\"flex absolute right-2 justify-center items-center w-3.5 h-3.5\",children:d(g.ItemIndicator,{children:d(i,{icon:\"check\",className:\"w-4 h-4\"})})}),d(g.ItemText,{children:a})]}));V.displayName=g.Item.displayName;const $=e.forwardRef(({className:e,...a},t)=>d(g.Separator,{ref:t,className:w(\"-mx-1 my-1 h-px bg-muted\",e),...a}));$.displayName=g.Separator.displayName;const F=e.forwardRef(({className:e,thumbStyle:a,...t},r)=>d(y.Root,{className:w(\"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary-600 data-[state=unchecked]:bg-gray-400\",e),...t,ref:r,children:d(y.Thumb,{className:w(\"pointer-events-none block h-5 w-5 rounded-full bg-primary-300 shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\",a)})}));F.displayName=y.Root.displayName;const U=({icon:e,children:a,tooltipText:t,side:r=\"top\",className:s})=>n(x.Root,{delayDuration:0,children:[d(x.Trigger,{asChild:!0,children:n(\"span\",{children:[e&&d(i,{icon:e,className:s}),a]})}),n(x.Content,{side:r,className:\"bg-black text-white text-xs rounded px-2 py-1 shadow-md\",children:[t,d(x.Arrow,{className:\"fill-black\"})]})]}),W=x.Provider,E=b,q=e.forwardRef((e,a)=>{const{className:t,...r}=e;return d(b.List,{ref:a,className:w(\"max-h-[340px] overflow-y-auto overflow-x-hidden scroll-smooth scroll-padding\",t),...r})});q.displayName=b.List.displayName;const H=e.forwardRef((e,a)=>{const{className:t,...r}=e;return d(b.Input,{ref:a,className:w(\"flex h-10 w-full border-input bg-background px-3 py-2 text-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-0 disabled:cursor-not-allowed disabled:opacity-50\",t),...r})});H.displayName=b.Input.displayName;const J=e.forwardRef((e,a)=>{const{className:t,...r}=e;return d(b.Item,{ref:a,className:w(\"relative flex cursor-default select-none items-center px-2 py-1.5 text-sm outline-none transition-colors duration-200 \",t),...r})});J.displayName=b.Item.displayName;const K=e.forwardRef((e,a)=>{const{className:t,...r}=e;return d(b.Group,{ref:a,className:w(\"overflow-hidden text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-0 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",t),...r})});K.displayName=b.Group.displayName;const M=e.forwardRef((e,a)=>{const{className:t,...r}=e;return d(b.Separator,{ref:a,className:w(\"-mx-1 h-px bg-border\",t),...r})});M.displayName=b.Separator.displayName;const Q=({className:e,...a})=>d(\"span\",{className:w(\"ml-auto text-xs tracking-widest text-muted-foreground\",e),...a});Q.displayName=\"CommandShortcut\";const X=e.forwardRef(({className:e,...a},t)=>d(b.Dialog,{ref:t,className:w(\"fixed inset-0 z-50 flex items-start justify-center p-4 pt-[25vh] backdrop-blur-md\",e),...a,children:d(\"div\",{className:\"w-full max-w-md rounded-md bg-background shadow-lg\",children:a.children})}));X.displayName=b.Dialog.displayName;const Y=e.forwardRef(({className:e,...a},t)=>d(\"div\",{ref:t,className:w(\"flex items-center justify-center p-4 text-sm text-muted-foreground\",e),...a,children:\"No results found.\"}));function Z({className:e,classNames:a,showOutsideDays:t=!0,...r}){return d(N,{showOutsideDays:t,className:w(\"p-3\",e),classNames:{months:\"flex flex-col lg:flex-row space-y-16 sm:space-x-4 sm:space-y-0\",month:\"space-y-4\",caption:\"flex justify-center pt-1 relative items-center\",caption_label:\"text-xs font-medium\",nav:\"space-x-1 flex items-center\",nav_button:w(_({variant:\"outline\"}),\"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-200\"),nav_button_previous:\"absolute left-1\",nav_button_next:\"absolute right-1\",table:\"w-full border-collapse space-y-1\",head_row:\"flex\",head_cell:\"text-muted-foreground rounded-md w-8 font-normal text-[0.8rem]\",row:\"flex w-full mt-0\",cell:\"h-8 w-8 text-center text-sm p-2 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",day:w(_({variant:\"ghost\"}),\"h-8 w-8 hover:bg-primary-100 p-1 font-normal aria-selected:opacity-100\"),day_range_end:\"day-range-end\",day_selected:\"bg-primary-600 text-white hover:bg-primary-600 hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",day_today:\"bg-accent text-accent-foreground\",day_outside:\"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30\",day_disabled:\"text-muted-foreground opacity-50\",day_range_middle:\"aria-selected:bg-accent aria-selected:text-accent-foreground\",day_hidden:\"invisible\",...a},components:{IconLeft:({...e})=>d(i,{icon:\"chevron-left\",className:\"w-4 h-4\"}),IconRight:({...e})=>d(i,{icon:\"chevron-right\",className:\"w-4 h-4\"})},...r})}Y.displayName=\"CommandEmpty\",Z.displayName=\"Calendar\";export{I as Button,Z as Calendar,X as CommandDialog,Y as CommandEmpty,K as CommandGroup,H as CommandInput,J as CommandItem,E as CommandLibrary,q as CommandList,M as CommandSeparator,Q as CommandShortcut,C as Input,S as Popover,j as PopoverContent,z as PopoverTrigger,T as Select,G as SelectContent,D as SelectGroup,V as SelectItem,P as SelectLabel,O as SelectScrollDownButton,L as SelectScrollUpButton,$ as SelectSeparator,B as SelectTrigger,A as SelectValue,v as Spinner,F as Switch,U as Tooltip,W as TooltipProvider,w as cn,R as renderSelectTrigger};\n//# sourceMappingURL=index.esm.js.map\n","// RichSelect.js\r\n\"use client\"\r\n\r\nimport { useState } from \"react\"; // <- no direct React import for library bundling\r\nimport { Popover, PopoverTrigger, PopoverContent } from \"@ankamala/core\";\r\nimport {\r\n  CommandLibrary,\r\n  CommandList,\r\n  CommandItem,\r\n  CommandGroup,\r\n  CommandInput,\r\n  CommandEmpty,\r\n} from \"@ankamala/core\";\r\nimport { cn, Spinner } from \"@ankamala/core\";\r\nimport { FAIcon } from \"@ankamala/core\";\r\nimport { Tooltip, TooltipProvider } from \"@ankamala/core\";\r\n// Helpers\r\nconst getOptionValue = (option) => (typeof option === \"object\" ? option.path : option);\r\n\r\nconst SelectedOptionsDisplay = ({ selected, onRemove, onClearAll }) => {\r\n  const sortedSelected = selected.slice().sort((a, b) => {\r\n    const labelA = typeof a === \"object\" ? a.label : a;\r\n    const labelB = typeof b === \"object\" ? b.label : b;\r\n    return labelA.localeCompare(labelB);\r\n  });\r\n\r\n  return (\r\n    <div className=\"relative flex items-center justify-between px-4 pt-2 pb-4 gap-2 border-b pr-8\">\r\n      <div className=\"flex flex-wrap gap-2\">\r\n        {sortedSelected.map((option) => (\r\n          <span\r\n            key={getOptionValue(option)}\r\n            onClick={(e) => {\r\n              e.stopPropagation();\r\n              onRemove(option);\r\n            }}\r\n            className=\"flex items-center bg-primary-400/10 text-[10px] px-1 py-0.5 rounded-sm cursor-pointer hover:bg-gray-200 transition\"\r\n          >\r\n            {typeof option === \"object\" ? option.label : option}\r\n            <FAIcon icon=\"close\" className=\"h-2 w-2 ml-1 text-primary-600\" />\r\n          </span>\r\n        ))}\r\n      </div>\r\n      <div\r\n        onClick={(e) => {\r\n          e.stopPropagation();\r\n          onClearAll();\r\n        }}\r\n        className=\"absolute top-1 right-2 cursor-pointer\"\r\n      >\r\n        <Tooltip\r\n          tooltipText=\"Clear all\"\r\n          icon=\"close\"\r\n          className=\"h-4 w-4 mr-1 text-gray-500 hover:text-gray-800 transition\"\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst RecursiveOptions = ({ options, selected, onOptionSelect, className, multiple, isSmall, optionTooltip }) => {\r\n  const sortedOptions = options.slice().sort((a, b) => {\r\n    const labelA = a.label?.toLowerCase() ?? \"\";\r\n    const labelB = b.label?.toLowerCase() ?? \"\";\r\n    return labelA.localeCompare(labelB);\r\n  });\r\n  return (\r\n    <div className={cn(className)}>\r\n      {sortedOptions.map((option, index) => {\r\n        if (option.isLoading) {\r\n          return (\r\n            <CommandItem\r\n              key=\"loading-state\"\r\n              value={option.label}\r\n              className=\"px-4 py-2 text-sm text-gray-500 cursor-default\"\r\n              disabled\r\n            >\r\n              <div className=\"flex items-center gap-2\">\r\n                <Spinner className=\"w-4 h-4\" />\r\n                <span>{option.label}</span>\r\n              </div>\r\n            </CommandItem>\r\n          );\r\n        }\r\n\r\n        const isSelected =\r\n          multiple || isSmall\r\n            ? selected.some((item) => getOptionValue(item) === getOptionValue(option))\r\n            : selected && getOptionValue(selected) === getOptionValue(option);\r\n\r\n        if (option.options) {\r\n          return (\r\n            <CommandGroup\r\n              className=\"px-2 mt-2 overflow-visible\"\r\n              key={index}\r\n              heading={<span className=\"cursor-default font-bold text-sm text-gray-800 whitespace-nowrap\">{option.label}</span>}\r\n            >\r\n              <RecursiveOptions\r\n                options={option.options}\r\n                selected={selected}\r\n                onOptionSelect={onOptionSelect}\r\n                multiple={multiple}\r\n                isSmall={isSmall}\r\n                optionTooltip={optionTooltip}\r\n              />\r\n            </CommandGroup>\r\n          );\r\n        } else {\r\n          const content = (\r\n            <CommandItem\r\n              key={index}\r\n              value={option.label}\r\n              className={cn(\r\n                \"px-4 cursor-pointer hover:bg-gray-100 font-light border-b border-gray-100 whitespace-nowrap\",\r\n                isSelected && \"bg-primary-400/10\"\r\n              )}\r\n              onSelect={() => onOptionSelect(option)}\r\n            >\r\n              <div className=\"flex justify-between items-center w-full gap-2\">\r\n                <span className=\"whitespace-nowrap\">{option.label}</span>\r\n                {isSelected && <FAIcon icon=\"check\" className=\"text-primary-600 h-3 w-3 ml-2 flex-shrink-0\" />}\r\n              </div>\r\n            </CommandItem>\r\n          );\r\n\r\n          if (optionTooltip) {\r\n            const tooltipText =\r\n              typeof optionTooltip === \"function\" ? optionTooltip(option) : optionTooltip?.[option.path];\r\n\r\n            return tooltipText ? (\r\n              <Tooltip key={index} tooltipText={tooltipText} side=\"right\">\r\n                {content}\r\n              </Tooltip>\r\n            ) : (\r\n              content\r\n            );\r\n          }\r\n\r\n          return content;\r\n        }\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst RichSelect = ({\r\n  options,\r\n  selected = [],\r\n  onSelect,\r\n  trigger,\r\n  children,\r\n  className,\r\n  multiple = false,\r\n  isSearchable = true,\r\n  isSmall = false,\r\n  isShadow = true,\r\n  showSelectedSummary = true,\r\n  onSearchChange,\r\n  searchPlaceholder = \"Search...\",\r\n  shouldFilter = true,\r\n  optionTooltip,\r\n  searchFields = ['label'],\r\n}) => {\r\n  const [openMain, setOpenMain] = useState(false);\r\n  const [searchValue, setSearchValue] = useState(\"\");\r\n\r\n  const flattenOptions = (opts) => {\r\n    const flattened = [];\r\n    const traverse = (items) => {\r\n      items.forEach(item => {\r\n        if (item.options) traverse(item.options);\r\n        else if (!item.isLoading) flattened.push(item);\r\n      });\r\n    };\r\n    traverse(opts);\r\n    return flattened;\r\n  };\r\n\r\n  const groupMatchesSearch = (groupLabel, search) => groupLabel.toLowerCase().includes(search.toLowerCase());\r\n\r\n  const filterOptions = (opts, search) => {\r\n    if (!search) return opts;\r\n    const searchLower = search.toLowerCase();\r\n    const flatMatches = flattenOptions(opts).filter(opt =>\r\n      searchFields.some(field => opt[field]?.toLowerCase().includes(searchLower))\r\n    );\r\n    const matchPaths = new Set(flatMatches.map(opt => opt.path));\r\n\r\n    const filterRecursive = (items) =>\r\n      items.map(item => {\r\n        if (item.options) {\r\n          const groupMatches = groupMatchesSearch(item.label, search);\r\n          if (groupMatches) return { ...item, matchedGroup: true };\r\n          const filteredChildren = filterRecursive(item.options);\r\n          if (filteredChildren.length > 0) return { ...item, options: filteredChildren, matchedGroup: false };\r\n          return null;\r\n        } else if (item.isLoading || matchPaths.has(item.path)) return item;\r\n        return null;\r\n      }).filter(Boolean);\r\n\r\n    return filterRecursive(opts);\r\n  };\r\n\r\n  const filteredOptions = shouldFilter ? filterOptions(options, searchValue) : options;\r\n\r\n  const handleOptionSelect = (option) => {\r\n    if (multiple) {\r\n      const isSelected = selected.some((item) => getOptionValue(item) === getOptionValue(option));\r\n      const newSelected = isSelected\r\n        ? selected.filter((item) => getOptionValue(item) !== getOptionValue(option))\r\n        : [...selected, option];\r\n      onSelect(newSelected);\r\n    } else {\r\n      onSelect(option);\r\n      setOpenMain(false);\r\n    }\r\n  };\r\n\r\n  const handleSearchChange = (value) => {\r\n    setSearchValue(value);\r\n    if (onSearchChange) onSearchChange(value);\r\n  };\r\n\r\n  return (\r\n    <div className={cn(\"relative flex\", className)}>\r\n      <Popover open={openMain} onOpenChange={setOpenMain}>\r\n        <PopoverTrigger\r\n          asChild\r\n          className={`flex items-center gap-1 text-gray-500 text-sm ${\r\n            isSmall ? \"border-none px-1 text-xs py-0\" : \"border-b px-2 py-1\"\r\n          }`}\r\n        >\r\n          {children ? children : trigger(selected)}\r\n        </PopoverTrigger>\r\n        <PopoverContent align=\"start\" sideOffset={4} className={cn(\"bg-white border w-auto\", !isShadow && \"shadow-none\")}>\r\n              <TooltipProvider>\r\n\r\n          <CommandLibrary shouldFilter={false}>\r\n            {isSearchable && (\r\n              <CommandInput\r\n                placeholder={searchPlaceholder}\r\n                className=\"px-4 py-2 mb-2 border-b border-gray-300\"\r\n                onValueChange={handleSearchChange}\r\n              />\r\n            )}\r\n\r\n            <CommandList>\r\n              {multiple && selected.length > 0 &&\r\n                (showSelectedSummary === \"always\" || (showSelectedSummary !== false && options.length > 6)) && (\r\n                  <SelectedOptionsDisplay\r\n                    selected={selected}\r\n                    onRemove={handleOptionSelect}\r\n                    onClearAll={() => onSelect([])}\r\n                  />\r\n                )}\r\n\r\n              <RecursiveOptions\r\n                options={filteredOptions}\r\n                selected={selected}\r\n                onOptionSelect={handleOptionSelect}\r\n                multiple={multiple}\r\n                isSmall={isSmall}\r\n                optionTooltip={optionTooltip}\r\n              />\r\n\r\n              {filteredOptions.length === 0 && <CommandEmpty />}\r\n            </CommandList>\r\n          </CommandLibrary>\r\n              </TooltipProvider>\r\n\r\n        </PopoverContent>\r\n      </Popover>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RichSelect;\r\n"],"names":["w","e","o","s","v","className","d","i","icon","k","a","selected","leftIcon","rightIcon","t","r","iconClassName","placeholder","maxWidth","l","c","m","n","ref","children","length","Array","isArray","label","displayName","getOptionValue","option","path","SelectedOptionsDisplay","onRemove","onClearAll","sortedSelected","slice","sort","b","labelA","labelB","localeCompare","_jsxs","_jsx","map","onClick","stopPropagation","FAIcon","Tooltip","tooltipText","RecursiveOptions","options","onOptionSelect","multiple","isSmall","optionTooltip","sortedOptions","_a$label","_b$label","toLowerCase","cn","index","isLoading","CommandItem","value","disabled","Spinner","isSelected","some","item","CommandGroup","heading","content","onSelect","side","RichSelect","trigger","isSearchable","isShadow","showSelectedSummary","onSearchChange","searchPlaceholder","shouldFilter","searchFields","openMain","setOpenMain","useState","searchValue","setSearchValue","filteredOptions","filterOptions","opts","search","searchLower","flatMatches","flattened","traverse","items","forEach","push","flattenOptions","filter","opt","field","_opt$field","includes","matchPaths","Set","filterRecursive","groupMatches","groupMatchesSearch","groupLabel","matchedGroup","filteredChildren","has","Boolean","handleOptionSelect","newSelected","Popover","open","onOpenChange","PopoverTrigger","asChild","PopoverContent","align","sideOffset","TooltipProvider","CommandLibrary","CommandInput","onValueChange","CommandList","CommandEmpty"],"mappings":"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"}