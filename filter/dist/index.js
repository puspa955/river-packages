"use strict";var e=require("react"),t=require("@radix-ui/react-slot"),r=require("class-variance-authority"),s=require("clsx"),a=require("tailwind-merge"),n=require("@fortawesome/react-fontawesome"),o=require("react/jsx-runtime"),i=require("@radix-ui/react-popover"),l=require("@fortawesome/fontawesome-svg-core"),d=require("@fortawesome/free-solid-svg-icons"),c=require("@radix-ui/react-select"),u=require("@radix-ui/react-switch"),m=require("@radix-ui/react-tooltip"),p=require("cmdk"),f=require("react-day-picker"),h=require("date-fns");function x(e){var t=Object.create(null);return e&&Object.keys(e).forEach(function(r){if("default"!==r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}}),t.default=e,Object.freeze(t)}var y=x(e),g=x(i),v=x(c),b=x(u),w=x(m);function j(...e){return a.twMerge(s.clsx(e))}const N=({className:e})=>o.jsx(n.FontAwesomeIcon,{icon:"spinner",className:j("animate-spin text-primary-600",e)}),C=e.forwardRef(({selected:e,leftIcon:t,rightIcon:r,className:s,iconClassName:a,placeholder:i,maxWidth:l="max-w-20",...d},c)=>o.jsxs("button",{ref:c,className:j("flex items-center border-b pb-1 px-2 text-gray-500 text-sm font-light cursor-pointer min-w-0 overflow-hidden",s),...d,children:[o.jsxs("div",{className:"flex text-start items-center justify-center truncate min-w-0",children:[t&&o.jsx(n.FontAwesomeIcon,{icon:t,className:j("h-3 w-3 text-secondary-500 flex-shrink-0",a)}),o.jsx("span",{className:`truncate min-w-0 ${l} ${t?"pl-1":""}`,children:e&&e.length?Array.isArray(e)?`${e.length} selected`:e.label:i})]}),r&&o.jsx(n.FontAwesomeIcon,{icon:r,className:"h-3 w-3 pl-1 flex-shrink-0"})]}));C.displayName="SelectTrigger";const k=r.cva("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary-700 text-primary-50 shadow hover:bg-primary-800",danger:"bg-red-700 text-red-50 shadow-sm hover:bg-red-800",outline:"border border-input shadow-sm hover:bg-gray-100",secondary:"bg-secondary-700 text-secondary-50 shadow-sm hover:bg-secondary-800",ghost:"hover:bg-primary-50",link:"text-primary-800 underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),A=e.forwardRef(({className:e,variant:r,size:s,asChild:a=!1,loading:n=!1,children:i,...l},d)=>{const c=a?t.Slot:"button",u=a?o.jsxs("span",{className:"inline-flex items-center",children:[n&&o.jsx(N,{className:"mr-2 h-4 w-4 animate-spin text-current"}),i]}):o.jsxs(o.Fragment,{children:[n&&o.jsx(N,{className:"mr-2 h-4 w-4 animate-spin text-current"}),i]});return o.jsx(c,{className:j(k({variant:r,size:s,className:e})),title:l.title,ref:d,disabled:l.disabled||n,...l,children:u})});A.displayName="Button";const $=y.forwardRef(({className:e,type:t,...r},s)=>o.jsx("input",{type:t,className:j("flex w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-0 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...r}));$.displayName="Input";const S=g.Root,M=g.Trigger,D=y.forwardRef(({className:e,align:t="center",sideOffset:r=4,...s},a)=>o.jsx(g.Portal,{children:o.jsx(g.Content,{ref:a,align:t,sideOffset:r,className:j("bg-popover text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s})}));D.displayName=g.Content.displayName,l.config.autoAddCss=!1,l.library.add(d.faCheck,d.faXmark,d.faFilter);const _=v.Root,F=v.Value,I=y.forwardRef(({iconClassName:e,className:t,isIconShow:r=!0,children:s,...a},i)=>o.jsxs(v.Trigger,{ref:i,className:j("flex h-9 w-full items-center whitespace-nowrap rounded-sm border bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...a,children:[o.jsx(v.Icon,{asChild:!0,children:r&&o.jsx(n.FontAwesomeIcon,{icon:"sort",className:j("mr-2 w-4 h-4",e)})}),s]}));I.displayName=v.Trigger.displayName;const O=y.forwardRef(({className:e,...t},r)=>o.jsx(v.ScrollUpButton,{ref:r,className:j("flex justify-center items-center py-1 cursor-default",e),...t,children:o.jsx(n.FontAwesomeIcon,{icon:"chevron-up"})}));O.displayName=v.ScrollUpButton.displayName;const R=y.forwardRef(({className:e,...t},r)=>o.jsx(v.ScrollDownButton,{ref:r,className:j("flex justify-center items-center py-1 cursor-default",e),...t,children:o.jsx(n.FontAwesomeIcon,{icon:"chevron-down"})}));R.displayName=v.ScrollDownButton.displayName;const L=y.forwardRef(({className:e,children:t,position:r="popper",...s},a)=>o.jsx(v.Portal,{children:o.jsxs(v.Content,{ref:a,className:j("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-sm border bg-white text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...s,children:[o.jsx(O,{}),o.jsx(v.Viewport,{className:j("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),o.jsx(R,{})]})}));L.displayName=v.Content.displayName;const T=y.forwardRef(({className:e,...t},r)=>o.jsx(v.Label,{ref:r,className:j("px-2 py-1.5 text-sm font-semibold opacity-70",e),...t}));T.displayName=v.Label.displayName;const z=y.forwardRef(({className:e,children:t,...r},s)=>o.jsxs(v.Item,{ref:s,className:j("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-slate-100 focus:text-primary-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[o.jsx("span",{className:"flex absolute right-2 justify-center items-center w-3.5 h-3.5",children:o.jsx(v.ItemIndicator,{children:o.jsx(n.FontAwesomeIcon,{icon:"check",className:"w-4 h-4"})})}),o.jsx(v.ItemText,{children:t})]}));z.displayName=v.Item.displayName;const G=y.forwardRef(({className:e,...t},r)=>o.jsx(v.Separator,{ref:r,className:j("-mx-1 my-1 h-px bg-muted",e),...t}));G.displayName=v.Separator.displayName;const q=y.forwardRef(({className:e,thumbStyle:t,...r},s)=>o.jsx(b.Root,{className:j("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary-600 data-[state=unchecked]:bg-gray-400",e),...r,ref:s,children:o.jsx(b.Thumb,{className:j("pointer-events-none block h-5 w-5 rounded-full bg-primary-300 shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0",t)})}));q.displayName=b.Root.displayName;const P=({icon:e,children:t,tooltipText:r,side:s="top",className:a})=>o.jsxs(w.Root,{delayDuration:0,children:[o.jsx(w.Trigger,{asChild:!0,children:o.jsxs("span",{children:[e&&o.jsx(n.FontAwesomeIcon,{icon:e,className:a}),t]})}),o.jsxs(w.Content,{side:s,className:"bg-black text-white text-xs rounded px-2 py-1 shadow-md",children:[r,o.jsx(w.Arrow,{className:"fill-black"})]})]}),U=w.Provider,V=p.Command,W=y.forwardRef((e,t)=>{const{className:r,...s}=e;return o.jsx(p.Command.List,{ref:t,className:j("max-h-[340px] overflow-y-auto overflow-x-hidden scroll-smooth scroll-padding",r),...s})});W.displayName=p.Command.List.displayName;const Y=y.forwardRef((e,t)=>{const{className:r,...s}=e;return o.jsx(p.Command.Input,{ref:t,className:j("flex h-10 w-full border-input bg-background px-3 py-2 text-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-0 disabled:cursor-not-allowed disabled:opacity-50",r),...s})});Y.displayName=p.Command.Input.displayName;const H=y.forwardRef((e,t)=>{const{className:r,...s}=e;return o.jsx(p.Command.Item,{ref:t,className:j("relative flex cursor-default select-none items-center px-2 py-1.5 text-sm outline-none transition-colors duration-200 ",r),...s})});H.displayName=p.Command.Item.displayName;const B=y.forwardRef((e,t)=>{const{className:r,...s}=e;return o.jsx(p.Command.Group,{ref:t,className:j("overflow-hidden text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-0 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",r),...s})});B.displayName=p.Command.Group.displayName;const E=y.forwardRef((e,t)=>{const{className:r,...s}=e;return o.jsx(p.Command.Separator,{ref:t,className:j("-mx-1 h-px bg-border",r),...s})});E.displayName=p.Command.Separator.displayName;const J=y.forwardRef(({className:e,...t},r)=>o.jsx(p.Command.Dialog,{ref:r,className:j("fixed inset-0 z-50 flex items-start justify-center p-4 pt-[25vh] backdrop-blur-md",e),...t,children:o.jsx("div",{className:"w-full max-w-md rounded-md bg-background shadow-lg",children:t.children})}));J.displayName=p.Command.Dialog.displayName;const Z=y.forwardRef(({className:e,...t},r)=>o.jsx("div",{ref:r,className:j("flex items-center justify-center p-4 text-sm text-muted-foreground",e),...t,children:"No results found."}));function Q({className:e,classNames:t,showOutsideDays:r=!0,...s}){return o.jsx(f.DayPicker,{showOutsideDays:r,className:j("p-3",e),classNames:{months:"flex flex-col lg:flex-row space-y-16 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-xs font-medium",nav:"space-x-1 flex items-center",nav_button:j(k({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-200"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-8 font-normal text-[0.8rem]",row:"flex w-full mt-0",cell:"h-8 w-8 text-center text-sm p-2 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:j(k({variant:"ghost"}),"h-8 w-8 hover:bg-primary-100 p-1 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary-600 text-white hover:bg-primary-600 hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:({...e})=>o.jsx(n.FontAwesomeIcon,{icon:"chevron-left",className:"w-4 h-4"}),IconRight:({...e})=>o.jsx(n.FontAwesomeIcon,{icon:"chevron-right",className:"w-4 h-4"})},...s})}Z.displayName="CommandEmpty",Q.displayName="Calendar";var X=1e3,K=6e4,ee=36e5,te="millisecond",re="second",se="minute",ae="hour",ne="day",oe="week",ie="month",le="quarter",de="year",ce="date",ue="Invalid Date",me=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,pe=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,fe={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],r=e%100;return"["+e+(t[(r-20)%10]||t[r]||t[0])+"]"}},he=function(e,t,r){var s=String(e);return!s||s.length>=t?e:""+Array(t+1-s.length).join(r)+e},xe={s:he,z:function(e){var t=-e.utcOffset(),r=Math.abs(t),s=Math.floor(r/60),a=r%60;return(t<=0?"+":"-")+he(s,2,"0")+":"+he(a,2,"0")},m:function e(t,r){if(t.date()<r.date())return-e(r,t);var s=12*(r.year()-t.year())+(r.month()-t.month()),a=t.clone().add(s,ie),n=r-a<0,o=t.clone().add(s+(n?-1:1),ie);return+(-(s+(r-a)/(n?a-o:o-a))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:ie,y:de,w:oe,d:ne,D:ce,h:ae,m:se,s:re,ms:te,Q:le}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},ye="en",ge={};ge[ye]=fe;var ve="$isDayjsObject",be=function(e){return e instanceof Ce||!(!e||!e[ve])},we=function e(t,r,s){var a;if(!t)return ye;if("string"==typeof t){var n=t.toLowerCase();ge[n]&&(a=n),r&&(ge[n]=r,a=n);var o=t.split("-");if(!a&&o.length>1)return e(o[0])}else{var i=t.name;ge[i]=t,a=i}return!s&&a&&(ye=a),a||!s&&ye},je=function(e,t){if(be(e))return e.clone();var r="object"==typeof t?t:{};return r.date=e,r.args=arguments,new Ce(r)},Ne=xe;Ne.l=we,Ne.i=be,Ne.w=function(e,t){return je(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var Ce=function(){function e(e){this.$L=we(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[ve]=!0}var t=e.prototype;return t.parse=function(e){this.$d=function(e){var t=e.date,r=e.utc;if(null===t)return new Date(NaN);if(Ne.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var s=t.match(me);if(s){var a=s[2]-1||0,n=(s[7]||"0").substring(0,3);return r?new Date(Date.UTC(s[1],a,s[3]||1,s[4]||0,s[5]||0,s[6]||0,n)):new Date(s[1],a,s[3]||1,s[4]||0,s[5]||0,s[6]||0,n)}}return new Date(t)}(e),this.init()},t.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},t.$utils=function(){return Ne},t.isValid=function(){return!(this.$d.toString()===ue)},t.isSame=function(e,t){var r=je(e);return this.startOf(t)<=r&&r<=this.endOf(t)},t.isAfter=function(e,t){return je(e)<this.startOf(t)},t.isBefore=function(e,t){return this.endOf(t)<je(e)},t.$g=function(e,t,r){return Ne.u(e)?this[t]:this.set(r,e)},t.unix=function(){return Math.floor(this.valueOf()/1e3)},t.valueOf=function(){return this.$d.getTime()},t.startOf=function(e,t){var r=this,s=!!Ne.u(t)||t,a=Ne.p(e),n=function(e,t){var a=Ne.w(r.$u?Date.UTC(r.$y,t,e):new Date(r.$y,t,e),r);return s?a:a.endOf(ne)},o=function(e,t){return Ne.w(r.toDate()[e].apply(r.toDate("s"),(s?[0,0,0,0]:[23,59,59,999]).slice(t)),r)},i=this.$W,l=this.$M,d=this.$D,c="set"+(this.$u?"UTC":"");switch(a){case de:return s?n(1,0):n(31,11);case ie:return s?n(1,l):n(0,l+1);case oe:var u=this.$locale().weekStart||0,m=(i<u?i+7:i)-u;return n(s?d-m:d+(6-m),l);case ne:case ce:return o(c+"Hours",0);case ae:return o(c+"Minutes",1);case se:return o(c+"Seconds",2);case re:return o(c+"Milliseconds",3);default:return this.clone()}},t.endOf=function(e){return this.startOf(e,!1)},t.$set=function(e,t){var r,s=Ne.p(e),a="set"+(this.$u?"UTC":""),n=(r={},r[ne]=a+"Date",r[ce]=a+"Date",r[ie]=a+"Month",r[de]=a+"FullYear",r[ae]=a+"Hours",r[se]=a+"Minutes",r[re]=a+"Seconds",r[te]=a+"Milliseconds",r)[s],o=s===ne?this.$D+(t-this.$W):t;if(s===ie||s===de){var i=this.clone().set(ce,1);i.$d[n](o),i.init(),this.$d=i.set(ce,Math.min(this.$D,i.daysInMonth())).$d}else n&&this.$d[n](o);return this.init(),this},t.set=function(e,t){return this.clone().$set(e,t)},t.get=function(e){return this[Ne.p(e)]()},t.add=function(e,t){var r,s=this;e=Number(e);var a=Ne.p(t),n=function(t){var r=je(s);return Ne.w(r.date(r.date()+Math.round(t*e)),s)};if(a===ie)return this.set(ie,this.$M+e);if(a===de)return this.set(de,this.$y+e);if(a===ne)return n(1);if(a===oe)return n(7);var o=(r={},r[se]=K,r[ae]=ee,r[re]=X,r)[a]||1,i=this.$d.getTime()+e*o;return Ne.w(i,this)},t.subtract=function(e,t){return this.add(-1*e,t)},t.format=function(e){var t=this,r=this.$locale();if(!this.isValid())return r.invalidDate||ue;var s=e||"YYYY-MM-DDTHH:mm:ssZ",a=Ne.z(this),n=this.$H,o=this.$m,i=this.$M,l=r.weekdays,d=r.months,c=r.meridiem,u=function(e,r,a,n){return e&&(e[r]||e(t,s))||a[r].slice(0,n)},m=function(e){return Ne.s(n%12||12,e,"0")},p=c||function(e,t,r){var s=e<12?"AM":"PM";return r?s.toLowerCase():s};return s.replace(pe,function(e,s){return s||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return Ne.s(t.$y,4,"0");case"M":return i+1;case"MM":return Ne.s(i+1,2,"0");case"MMM":return u(r.monthsShort,i,d,3);case"MMMM":return u(d,i);case"D":return t.$D;case"DD":return Ne.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return u(r.weekdaysMin,t.$W,l,2);case"ddd":return u(r.weekdaysShort,t.$W,l,3);case"dddd":return l[t.$W];case"H":return String(n);case"HH":return Ne.s(n,2,"0");case"h":return m(1);case"hh":return m(2);case"a":return p(n,o,!0);case"A":return p(n,o,!1);case"m":return String(o);case"mm":return Ne.s(o,2,"0");case"s":return String(t.$s);case"ss":return Ne.s(t.$s,2,"0");case"SSS":return Ne.s(t.$ms,3,"0");case"Z":return a}return null}(e)||a.replace(":","")})},t.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},t.diff=function(e,t,r){var s,a=this,n=Ne.p(t),o=je(e),i=(o.utcOffset()-this.utcOffset())*K,l=this-o,d=function(){return Ne.m(a,o)};switch(n){case de:s=d()/12;break;case ie:s=d();break;case le:s=d()/3;break;case oe:s=(l-i)/6048e5;break;case ne:s=(l-i)/864e5;break;case ae:s=l/ee;break;case se:s=l/K;break;case re:s=l/X;break;default:s=l}return r?s:Ne.a(s)},t.daysInMonth=function(){return this.endOf(ie).$D},t.$locale=function(){return ge[this.$L]},t.locale=function(e,t){if(!e)return this.$L;var r=this.clone(),s=we(e,t,!0);return s&&(r.$L=s),r},t.clone=function(){return Ne.w(this.$d,this)},t.toDate=function(){return new Date(this.valueOf())},t.toJSON=function(){return this.isValid()?this.toISOString():null},t.toISOString=function(){return this.$d.toISOString()},t.toString=function(){return this.$d.toUTCString()},e}(),ke=Ce.prototype;je.prototype=ke,[["$ms",te],["$s",re],["$m",se],["$H",ae],["$W",ne],["$M",ie],["$y",de],["$D",ce]].forEach(function(e){ke[e[1]]=function(t){return this.$g(t,e[0],e[1])}}),je.extend=function(e,t){return e.$i||(e(t,Ce,je),e.$i=!0),je},je.locale=we,je.isDayjs=be,je.unix=function(e){return je(1e3*e)},je.en=ge[ye],je.Ls=ge,je.p={};const Ae=(e,t)=>{switch(t){case"number":return Number(e);case"date":return je(e).isValid()?new Date(e):new Date;case"boolean":return Boolean(e);case"float":return parseFloat(e);default:return e}},$e={"<":(e,t)=>e<t,">":(e,t)=>e>t,">=":(e,t)=>e>=t,"<=":(e,t)=>e<=t,"=":(e,t)=>Array.isArray(e)&&Array.isArray(t)?t.some(t=>e.includes(t)):Array.isArray(e)?e.includes(t):Array.isArray(t)?t.includes(e):e===t,"!=":(e,t)=>Array.isArray(e)&&Array.isArray(t)?!t.some(t=>e.includes(t)):Array.isArray(e)?!e.includes(t):Array.isArray(t)?!t.includes(e):e!==t,contains:(e,t)=>"string"==typeof e&&"string"==typeof t&&e.toLowerCase().includes(t.toLowerCase()),beginswith:(e,t)=>"string"==typeof e&&"string"==typeof t&&e.toLowerCase().startsWith(t.toLowerCase()),process(e,t,r){return this[r](e,t)}};function Se(e,t){if(!t)return!0;if(t.operator&&Array.isArray(t.rules)&&1===t.rules.length)return Se(e,t.rules[0]);if(Array.isArray(t))return t.every(t=>Se(e,t));if(t.operator&&Array.isArray(t.rules)){const r=t.operator.toLowerCase();if("and"===r)return t.rules.every(t=>Se(e,t));if("or"===r)return t.rules.some(t=>Se(e,t))}if(t.key&&t.operator&&void 0!==t.value){const{key:r,value:s,operator:a}=t;let n=e[r];if(null==n)return("!="===a||"not_equals"===a)&&(null!=s&&""!==s);try{return $e.process(n,s,a)}catch(e){return console.warn("Filter evaluation error:",e,{key:r,value:s,operator:a,itemValue:n}),!1}}return!0}function Me(e,t){if(!e)return e;return Array.isArray(e)?e.map(e=>Me(e,t)):e.operator&&Array.isArray(e.rules)?{...e,rules:e.rules.map(e=>Me(e,t))}:e.and?{...e,and:e.and.map(e=>Me(e,t))}:e.or?{...e,or:e.or.map(e=>Me(e,t))}:e.key&&((r=e.key)&&null!=t&&null!==(s=t.all)&&void 0!==s&&s.map&&"date"===(null===(a=t.all.map[r])||void 0===a?void 0:a.type))&&"string"==typeof e.value?{...e,value:new Date(e.value)}:e;var r,s,a}function De(e){return e?Array.isArray(e)?e.reduce((e,t)=>e+De(t),0):e.rules&&Array.isArray(e.rules)?De(e.rules):e.key?1:0:0}function _e({placeholder:e="Enter a date",value:t,onChange:r,format:s="yyyy MMM dd",calendarClassName:a,className:n}){const i=t instanceof Date&&!isNaN(t)?h.format(t,s):"";return o.jsxs(S,{children:[o.jsx(M,{asChild:!0,children:o.jsx(A,{variant:"outline",className:j("text-xs border-0 border-b-[1px] shadow-none p-1 justify-start text-left font-normal",!t&&"text-slate-500",n),children:i||o.jsx("span",{children:e})})}),o.jsx(D,{className:"p-0 w-auto",align:"start",children:o.jsx(Q,{className:j("bg-gray-100",a),classNames:{head_cell:"h-8 w-8 text-sm font-medium",cell:"h-8 w-8 text-slate-600"},mode:"single",selected:t instanceof Date&&!isNaN(t)?t:void 0,onSelect:e=>r(e),initialFocus:!0})})]})}const Fe=e=>"object"==typeof e?e.path:e,Ie=({selected:e,onRemove:t,onClearAll:r})=>{const s=e.slice().sort((e,t)=>{const r="object"==typeof e?e.label:e,s="object"==typeof t?t.label:t;return r.localeCompare(s)});return o.jsxs("div",{className:"relative flex items-center justify-between px-4 pt-2 pb-4 gap-2 border-b pr-8",children:[o.jsx("div",{className:"flex flex-wrap gap-2",children:s.map(e=>o.jsxs("span",{onClick:r=>{r.stopPropagation(),t(e)},className:"flex items-center bg-primary-400/10 text-[10px] px-1 py-0.5 rounded-sm cursor-pointer hover:bg-gray-200 transition",children:["object"==typeof e?e.label:e,o.jsx(n.FontAwesomeIcon,{icon:"close",className:"h-2 w-2 ml-1 text-primary-600"})]},Fe(e)))}),o.jsx("div",{onClick:e=>{e.stopPropagation(),r()},className:"absolute top-1 right-2 cursor-pointer",children:o.jsx(P,{tooltipText:"Clear all",icon:"close",className:"h-4 w-4 mr-1 text-gray-500 hover:text-gray-800 transition"})})]})},Oe=({options:e,selected:t,onOptionSelect:r,className:s,multiple:a,isSmall:i,optionTooltip:l})=>{const d=e.slice().sort((e,t)=>{var r,s;const a=(null===(r=e.label)||void 0===r?void 0:r.toLowerCase())??"",n=(null===(s=t.label)||void 0===s?void 0:s.toLowerCase())??"";return a.localeCompare(n)});return o.jsx("div",{className:j(s),children:d.map((e,s)=>{if(e.isLoading)return o.jsx(H,{value:e.label,className:"px-4 py-2 text-sm text-gray-500 cursor-default",disabled:!0,children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(N,{className:"w-4 h-4"}),o.jsx("span",{children:e.label})]})},"loading-state");const d=a||i?t.some(t=>Fe(t)===Fe(e)):t&&Fe(t)===Fe(e);if(e.options)return o.jsx(B,{className:"px-2 mt-2 overflow-visible",heading:o.jsx("span",{className:"cursor-default font-bold text-sm text-gray-800 whitespace-nowrap",children:e.label}),children:o.jsx(Oe,{options:e.options,selected:t,onOptionSelect:r,multiple:a,isSmall:i,optionTooltip:l})},s);{const t=o.jsx(H,{value:e.label,className:j("px-4 cursor-pointer hover:bg-gray-100 font-light border-b border-gray-100 whitespace-nowrap",d&&"bg-primary-400/10"),onSelect:()=>r(e),children:o.jsxs("div",{className:"flex justify-between items-center w-full gap-2",children:[o.jsx("span",{className:"whitespace-nowrap",children:e.label}),d&&o.jsx(n.FontAwesomeIcon,{icon:"check",className:"text-primary-600 h-3 w-3 ml-2 flex-shrink-0"})]})},s);if(l){const r="function"==typeof l?l(e):null==l?void 0:l[e.path];return r?o.jsx(P,{tooltipText:r,side:"right",children:t},s):t}return t}})})},Re=({options:t,selected:r=[],onSelect:s,trigger:a,children:n,className:i,multiple:l=!1,isSearchable:d=!0,isSmall:c=!1,isShadow:u=!0,showSelectedSummary:m=!0,onSearchChange:p,searchPlaceholder:f="Search...",shouldFilter:h=!0,optionTooltip:x,searchFields:y=["label"]})=>{const[g,v]=e.useState(!1),[b,w]=e.useState(""),N=h?((e,t)=>{if(!t)return e;const r=t.toLowerCase(),s=(e=>{const t=[],r=e=>{e.forEach(e=>{e.options?r(e.options):e.isLoading||t.push(e)})};return r(e),t})(e).filter(e=>y.some(t=>{var s;return null===(s=e[t])||void 0===s?void 0:s.toLowerCase().includes(r)})),a=new Set(s.map(e=>e.path)),n=e=>e.map(e=>{if(e.options){const r=((e,t)=>e.toLowerCase().includes(t.toLowerCase()))(e.label,t);if(r)return{...e,matchedGroup:!0};const s=n(e.options);return s.length>0?{...e,options:s,matchedGroup:!1}:null}return e.isLoading||a.has(e.path)?e:null}).filter(Boolean);return n(e)})(t,b):t,C=e=>{if(l){const t=r.some(t=>Fe(t)===Fe(e))?r.filter(t=>Fe(t)!==Fe(e)):[...r,e];s(t)}else s(e),v(!1)};return o.jsx("div",{className:j("relative flex",i),children:o.jsxs(S,{open:g,onOpenChange:v,children:[o.jsx(M,{asChild:!0,className:"flex items-center gap-1 text-gray-500 text-sm "+(c?"border-none px-1 text-xs py-0":"border-b px-2 py-1"),children:n||a(r)}),o.jsx(D,{align:"start",sideOffset:4,className:j("bg-white border w-auto",!u&&"shadow-none"),children:o.jsx(U,{children:o.jsxs(V,{shouldFilter:!1,children:[d&&o.jsx(Y,{placeholder:f,className:"px-4 py-2 mb-2 border-b border-gray-300",onValueChange:e=>{w(e),p&&p(e)}}),o.jsxs(W,{children:[l&&r.length>0&&("always"===m||!1!==m&&t.length>6)&&o.jsx(Ie,{selected:r,onRemove:C,onClearAll:()=>s([])}),o.jsx(Oe,{options:N,selected:r,onOptionSelect:C,multiple:l,isSmall:c,optionTooltip:x}),0===N.length&&o.jsx(Z,{})]})]})})})]})})},Le={number:["<",">","<=",">="],string:["contains","beginswith"],date:["<",">","<=",">="],boolean:[],select:[],__all__:["=","!="]},Te={number:"number",string:"text",date:"date"},ze=({removeFilter:t,filter:r,keys:s,types:a,handleFilterChange:i,options:l,keysMeta:d})=>{var c;const{key:u,id:m,operator:p,value:f}=r,h=e.useMemo(()=>u&&a[u],[u,a]),x=e.useMemo(()=>h?[...Le.__all__,...Le[h]]:Le.__all__,[h]),y=e.useMemo(()=>Te[h]||"text",[h]),g=e.useMemo(()=>{var e;return"select"===h&&null!=l&&null!==(e=l[u])&&void 0!==e&&e.length?l[u]:[]},[h,l,u]),v=(e,t)=>{let r;r="key"===e?{[e]:t,operator:"=",value:Ae("",a[t])}:{[e]:t},i(m,r)};return o.jsxs("div",{className:"flex gap-2 items-center w-full",children:[o.jsxs("div",{className:"flex gap-4 items-center w-full",children:[o.jsx("div",{className:"flex-shrink-0 w-[200px]",children:o.jsx(Re,{selected:u,onSelect:e=>v("key",e.path),options:s,children:o.jsxs("button",{className:"border-b-[1px] pl-2 text-sm focus:ring-0 flex items-center w-full h-9",children:[o.jsx(n.FontAwesomeIcon,{icon:"sort",className:"h-3 w-3"}),o.jsx("span",{className:"truncate",children:null===(c=d[u])||void 0===c?void 0:c.label})]})})}),o.jsx("div",{className:"flex-shrink-0 w-[75px]",children:o.jsxs(_,{onValueChange:e=>v("operator",e),value:p,children:[o.jsx(I,{iconClassName:"h-3 w-3 text-gray-500",className:"border-0 border-b-[1px] shadow-none focus:ring-0 text-sm pl-0 text-gray-600 w-full",children:o.jsx(F,{className:"text-slate-700 truncate",placeholder:"Select"})}),o.jsx(L,{className:"text-slate-700",children:x.map(e=>o.jsx(z,{value:e,children:e},e))})]})}),o.jsxs("div",{className:"flex-1",children:["select"===h&&o.jsx(Re,{options:g,selected:d[u].multiple?Array.isArray(f)?f.map(e=>g.find(t=>t.path===e)||e):[]:g.find(e=>e.path===f)||f,onSelect:e=>{const t=Array.isArray(e)?e.map(e=>e.path??e):e.path??e;v("value",t)},multiple:d[u].multiple??!1,isSearchable:!0,isSmall:!1,showSelectedSummary:!1,trigger:e=>{var t;return((e,t,r,s,a,n)=>o.jsx(C,{selected:e,leftIcon:t,rightIcon:r,className:s,iconClassName:a,placeholder:n,maxWidth:"flex-1"}))(e,"sort",null,"border-b-[1px] pl-2 text-sm focus:ring-0 flex items-center w-full h-9","mr-2",d[u].multiple?"Select":(null===(t=g.find(e=>e.path===f))||void 0===t?void 0:t.label)||"Select")}}),"date"===h&&o.jsx(_e,{placeholder:"Enter a date",value:f,format:"yyyy MMM dd",onChange:e=>v("value",e),className:"w-full text-sm",calendarClassName:"border-t-2 border-primary-600"},"date"),"boolean"===h&&o.jsx("div",{className:"flex justify-center items-center h-full text-center",children:o.jsx(P,{tooltipText:"Toggle to enable or disable",className:"mr-2 text-gray-500",children:o.jsx(q,{onCheckedChange:e=>v("value",!!e),checked:!!f,className:"w-10 h-4.5 rounded-full border-transparent transition-colors data-[state=checked]:bg-primary-700 data-[state=unchecked]:bg-gray-500",thumbStyle:"w-4 h-4 bg-white rounded-full shadow-md transform transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0"})})}),("string"===h||"number"===h)&&o.jsx($,{defaultValue:f,placeholder:"Enter a value",onBlur:e=>{var t;return v("value",Ae(null==e||null===(t=e.target)||void 0===t?void 0:t.value,h))},type:y,className:"pl-2 bg-transparent text-sm rounded-none border-t-0 border-r-0 border-b-[1px] border-l-0 focus:ring-2 focus:ring-primary-500 focus:border-transparent h-9 w-full"})]})]}),o.jsx(P,{tooltipText:"Remove item",children:o.jsx("div",{onClick:()=>t(m),className:"cursor-pointer",children:o.jsx(n.FontAwesomeIcon,{icon:"multiply"})})})]})},Ge=()=>{var e;return null===(e=crypto)||void 0===e?void 0:e.randomUUID()},qe=(e={},t)=>({id:Ge(),...t,...e,isGroup:!1}),Pe=(e=[],t="and")=>({id:Ge(),isGroup:!0,operator:t.toLowerCase(),rules:e}),Ue=({onAddCondition:e,onAddGroup:t,canAddGroup:r=!0,level:s=0})=>{const a=s>=2,n="text-gray-600 font-medium cursor-pointer hover:text-primary-600 text-sm";return o.jsxs("div",{className:"flex gap-4",children:[o.jsx("span",{className:n,onClick:e,children:"+ Add condition"}),r&&(a?o.jsx(P,{tooltipText:"Filter condition can only be nested three level deep",children:o.jsx("span",{className:"text-gray-400 text-sm cursor-not-allowed",children:"+ Add condition group"})}):o.jsx("span",{className:n,onClick:t,children:"+ Add condition group"}))]})},Ve=({value:e,onChange:t})=>o.jsxs(_,{defaultValue:e.toUpperCase(),onValueChange:e=>t(e.toLowerCase()),children:[o.jsx(I,{iconClassName:"h-3 w-3 text-gray-500",className:"border-0 border-b-[1px] shadow-none focus:ring-0 text-sm pl-0 text-gray-600 w-[55px]",children:o.jsx(F,{})}),o.jsxs(L,{children:[o.jsx(z,{value:"AND",children:"and"}),o.jsx(z,{value:"OR",children:"or"})]})]}),We=({group:e,onChange:t,onRemove:r,keys:s,types:a,options:i,defaultCondition:l,keysMeta:d,level:c=0,isRoot:u=!1})=>{const m=e.rules||[],p=e.operator||e.logic||"and",f=(r,s)=>{const a=m.map(e=>e.id===r?s:e);t({...e,rules:a})},h=r=>{const s=m.filter(e=>e.id!==r);t({...e,rules:s})},x=r=>{t({...e,rules:[...m,r]})},y=r=>{t({...e,operator:r.toLowerCase()})},g=!u,v=!u,b=0===m.length;return o.jsxs("div",{className:j("flex flex-col gap-4",g&&"rounded-sm py-2 px-4 border bg-gray-100"),children:[b&&v&&o.jsx("div",{className:"text-sm font-light",children:"Add conditions or sub-groups."}),m.map((e,t)=>o.jsxs("div",{className:"flex gap-2 items-start",children:[0===t?o.jsx("span",{className:"w-[55px] pt-2 text-sm font-medium text-gray-700",children:"Where"}):1===t?o.jsx(Ve,{value:p,onChange:y}):o.jsx("span",{className:"w-[55px] pt-2 text-sm text-gray-700",children:p}),o.jsx("div",{className:"flex-1",children:e.isGroup?o.jsx(We,{group:e,onChange:t=>f(e.id,t),onRemove:()=>h(e.id),keys:s,types:a,options:i,defaultCondition:l,keysMeta:d,level:c+1,isRoot:!1}):o.jsx(ze,{filter:e,handleFilterChange:(t,r)=>f(e.id,{...e,...r}),removeFilter:()=>h(e.id),types:a,keys:s,options:i,keysMeta:d})})]},e.id)),v&&o.jsxs("div",{className:"flex justify-between gap-10 items-center pt-2 border-t border-gray-200",children:[o.jsx(Ue,{onAddCondition:()=>x(qe({},l)),onAddGroup:()=>x(Pe()),level:c}),o.jsx(P,{tooltipText:"Remove group",children:o.jsx("button",{onClick:r,className:"text-gray-600 hover:text-gray-900 transition-colors",children:o.jsx(n.FontAwesomeIcon,{icon:"multiply"})})})]})]})},Ye=({onAddCondition:e,onAddGroup:t})=>o.jsxs("div",{className:"flex gap-6",children:[o.jsx("span",{className:"text-gray-600 font-medium cursor-pointer hover:text-primary-600 text-sm",onClick:e,children:"+ Add condition"}),o.jsx("span",{className:"text-gray-600 font-medium cursor-pointer hover:text-primary-600 text-sm",onClick:t,children:"+ Add condition group"})]}),He=e=>{if(!e)return null;if(!e.isGroup){const{id:t,isGroup:r,...s}=e;return s.key&&s.operator?s:null}const t=(e.rules||[]).map(e=>He(e)).filter(Boolean);return 0===t.length?null:{operator:e.operator||"and",rules:t}},Be=e=>{return e&&e.operator&&Array.isArray(e.rules)?{id:null===(t=crypto)||void 0===t?void 0:t.randomUUID(),isGroup:!0,operator:e.operator,rules:e.rules.map(e=>{return e.operator&&e.rules?Be(e):{id:null===(t=crypto)||void 0===t?void 0:t.randomUUID(),isGroup:!1,...e};var t})}:null;var t},Ee=({keys:t,types:r,initialFilters:s,updateFilters:a,options:i,defaultCondition:l,keysMeta:d,closePopover:c})=>{const[u,m]=e.useState(()=>s?s.isGroup?s:Be(s):null),p=((null==u?void 0:u.rules)||[]).length>0,f=Boolean(u&&p),h=e=>{if(!u)return;const t=u.rules||[];m({...u,rules:[...t,e]})};return e.useEffect(()=>{if(s){const e=s.isGroup?s:Be(s);m(e)}},[s]),o.jsxs("div",{className:"text-slate-600 w-full",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx(n.FontAwesomeIcon,{icon:"filter",className:"text-primary-700",size:"lg"}),o.jsx("h2",{className:"text-lg font-medium text-gray-800",children:"Filter"})]}),u?o.jsxs(o.Fragment,{children:[f&&o.jsx("div",{className:"flex gap-2 items-start mb-4",children:o.jsx("div",{className:"flex-1",children:o.jsx(We,{group:u,onChange:m,onRemove:()=>m(null),keys:t,types:r,options:i,defaultCondition:l,keysMeta:d,level:0,isRoot:!0})})}),o.jsxs("div",{className:"flex justify-between items-center gap-10",children:[o.jsx(Ye,{onAddCondition:()=>h(qe({},l)),onAddGroup:()=>h(Pe())}),o.jsxs(A,{className:"rounded-sm shadow-sm text-xs transition-all hover:shadow-md",onClick:()=>{const e=He(u);a(e),c()},children:[o.jsx(n.FontAwesomeIcon,{icon:"filter",className:"mr-1",size:"sm"}),o.jsx("span",{children:"Apply"})]})]})]}):o.jsx(Ye,{onAddCondition:()=>{m(Pe([qe({},l)]))},onAddGroup:()=>{const e=Pe();m(Pe([e]))}})]})};function Je({className:e,closePopover:t,options:r,filterData:s,defaultCondition:a,filters:n,updateFilters:i,keysMeta:l}){return o.jsx("div",{className:j(e),children:o.jsx(Ee,{keys:(null==s?void 0:s.fields)||[],types:(null==s?void 0:s.types)||{},initialFilters:n,updateFilters:i,options:r,defaultCondition:a,keysMeta:l,closePopover:t})})}exports.FilterPopover=function({options:t,filterData:r,defaultCondition:s,filters:a,updateFilters:i,keysMeta:l}){const[d,c]=e.useState(!1),u=De(a);return o.jsxs(S,{className:"z-10",style:{zIndex:10},open:d,onOpenChange:()=>c(!d),children:[o.jsx(M,{asChild:!0,children:o.jsxs(A,{className:"rounded-sm h-10 w-10 text-lg shadow-lg relative",children:[o.jsx(n.FontAwesomeIcon,{icon:"filter"}),u>0&&o.jsx("span",{className:"absolute top-0 right-0 text-xs bg-primary-600 text-white rounded-full w-5 h-5 flex items-center justify-center text-center -mr-2 -mt-2",children:u})]})}),o.jsx(D,{className:"max-w-[60vw] w-auto max-h-[70vh] overflow-y-auto rounded-none bg-gray-50 border-t-2 border-t-primary-700 p-6",children:o.jsx(U,{children:o.jsx(Je,{closePopover:()=>c(!1),options:t,filterData:r,defaultCondition:s,filters:a,updateFilters:i,keysMeta:l})})})]})},exports.applyFilterFn=(e,t,r,s)=>{if(!t)return Array.isArray(e)?[...e]:[];const a=Me(t,s);return e.filter(e=>Se(r&&r[e.id]?r[e.id]:e,a))};
//# sourceMappingURL=index.js.map
