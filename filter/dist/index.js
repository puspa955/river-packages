"use strict";var e=require("react"),t=require("@radix-ui/react-slot"),s=require("class-variance-authority"),r=require("clsx"),a=require("tailwind-merge"),o=require("@fortawesome/react-fontawesome"),n=require("react/jsx-runtime"),l=require("@radix-ui/react-popover"),i=require("@fortawesome/fontawesome-svg-core"),d=require("@fortawesome/free-solid-svg-icons"),c=require("@radix-ui/react-select"),m=require("@radix-ui/react-switch"),u=require("@radix-ui/react-tooltip"),p=require("cmdk"),x=require("react-day-picker"),f=require("dayjs/esm"),h=require("date-fns");function y(e){var t=Object.create(null);return e&&Object.keys(e).forEach(function(s){if("default"!==s){var r=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(t,s,r.get?r:{enumerable:!0,get:function(){return e[s]}})}}),t.default=e,Object.freeze(t)}var g=y(e),b=y(l),v=y(c),w=y(m),j=y(u);function N(...e){return a.twMerge(r.clsx(e))}const C=({className:e})=>n.jsx(o.FontAwesomeIcon,{icon:"spinner",className:N("animate-spin text-primary-600",e)}),A=e.forwardRef(({selected:e,leftIcon:t,rightIcon:s,className:r,iconClassName:a,placeholder:l,maxWidth:i="max-w-20",...d},c)=>n.jsxs("button",{ref:c,className:N("flex items-center border-b pb-1 px-2 text-gray-500 text-sm font-light cursor-pointer min-w-0 overflow-hidden",r),...d,children:[n.jsxs("div",{className:"flex text-start items-center justify-center truncate min-w-0",children:[t&&n.jsx(o.FontAwesomeIcon,{icon:t,className:N("h-3 w-3 text-secondary-500 flex-shrink-0",a)}),n.jsx("span",{className:`truncate min-w-0 ${i} ${t?"pl-1":""}`,children:e&&e.length?Array.isArray(e)?`${e.length} selected`:e.label:l})]}),s&&n.jsx(o.FontAwesomeIcon,{icon:s,className:"h-3 w-3 pl-1 flex-shrink-0"})]}));A.displayName="SelectTrigger";const k=s.cva("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary-700 text-primary-50 shadow hover:bg-primary-800",danger:"bg-red-700 text-red-50 shadow-sm hover:bg-red-800",outline:"border border-input shadow-sm hover:bg-gray-100",secondary:"bg-secondary-700 text-secondary-50 shadow-sm hover:bg-secondary-800",ghost:"hover:bg-primary-50",link:"text-primary-800 underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),S=e.forwardRef(({className:e,variant:s,size:r,asChild:a=!1,loading:o=!1,children:l,...i},d)=>{const c=a?t.Slot:"button",m=a?n.jsxs("span",{className:"inline-flex items-center",children:[o&&n.jsx(C,{className:"mr-2 h-4 w-4 animate-spin text-current"}),l]}):n.jsxs(n.Fragment,{children:[o&&n.jsx(C,{className:"mr-2 h-4 w-4 animate-spin text-current"}),l]});return n.jsx(c,{className:N(k({variant:s,size:r,className:e})),title:i.title,ref:d,disabled:i.disabled||o,...i,children:m})});S.displayName="Button";const F=g.forwardRef(({className:e,type:t,...s},r)=>n.jsx("input",{type:t,className:N("flex w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-0 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...s}));F.displayName="Input";const I=b.Root,R=b.Trigger,_=g.forwardRef(({className:e,align:t="center",sideOffset:s=4,...r},a)=>n.jsx(b.Portal,{children:n.jsx(b.Content,{ref:a,align:t,sideOffset:s,className:N("bg-popover text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));_.displayName=b.Content.displayName,i.config.autoAddCss=!1,i.library.add(d.faCheck,d.faXmark,d.faFilter);const L=v.Root,M=v.Value,T=g.forwardRef(({iconClassName:e,className:t,isIconShow:s=!0,children:r,...a},l)=>n.jsxs(v.Trigger,{ref:l,className:N("flex h-9 w-full items-center whitespace-nowrap rounded-sm border bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...a,children:[n.jsx(v.Icon,{asChild:!0,children:s&&n.jsx(o.FontAwesomeIcon,{icon:"sort",className:N("mr-2 w-4 h-4",e)})}),r]}));T.displayName=v.Trigger.displayName;const D=g.forwardRef(({className:e,...t},s)=>n.jsx(v.ScrollUpButton,{ref:s,className:N("flex justify-center items-center py-1 cursor-default",e),...t,children:n.jsx(o.FontAwesomeIcon,{icon:"chevron-up"})}));D.displayName=v.ScrollUpButton.displayName;const G=g.forwardRef(({className:e,...t},s)=>n.jsx(v.ScrollDownButton,{ref:s,className:N("flex justify-center items-center py-1 cursor-default",e),...t,children:n.jsx(o.FontAwesomeIcon,{icon:"chevron-down"})}));G.displayName=v.ScrollDownButton.displayName;const q=g.forwardRef(({className:e,children:t,position:s="popper",...r},a)=>n.jsx(v.Portal,{children:n.jsxs(v.Content,{ref:a,className:N("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-sm border bg-white text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===s&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:s,...r,children:[n.jsx(D,{}),n.jsx(v.Viewport,{className:N("p-1","popper"===s&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),n.jsx(G,{})]})}));q.displayName=v.Content.displayName;const O=g.forwardRef(({className:e,...t},s)=>n.jsx(v.Label,{ref:s,className:N("px-2 py-1.5 text-sm font-semibold opacity-70",e),...t}));O.displayName=v.Label.displayName;const z=g.forwardRef(({className:e,children:t,...s},r)=>n.jsxs(v.Item,{ref:r,className:N("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-slate-100 focus:text-primary-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...s,children:[n.jsx("span",{className:"flex absolute right-2 justify-center items-center w-3.5 h-3.5",children:n.jsx(v.ItemIndicator,{children:n.jsx(o.FontAwesomeIcon,{icon:"check",className:"w-4 h-4"})})}),n.jsx(v.ItemText,{children:t})]}));z.displayName=v.Item.displayName;const P=g.forwardRef(({className:e,...t},s)=>n.jsx(v.Separator,{ref:s,className:N("-mx-1 my-1 h-px bg-muted",e),...t}));P.displayName=v.Separator.displayName;const B=g.forwardRef(({className:e,thumbStyle:t,...s},r)=>n.jsx(w.Root,{className:N("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary-600 data-[state=unchecked]:bg-gray-400",e),...s,ref:r,children:n.jsx(w.Thumb,{className:N("pointer-events-none block h-5 w-5 rounded-full bg-primary-300 shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0",t)})}));B.displayName=w.Root.displayName;const V=({icon:e,children:t,tooltipText:s,side:r="top",className:a})=>n.jsxs(j.Root,{delayDuration:0,children:[n.jsx(j.Trigger,{asChild:!0,children:n.jsxs("span",{children:[e&&n.jsx(o.FontAwesomeIcon,{icon:e,className:a}),t]})}),n.jsxs(j.Content,{side:r,className:"bg-black text-white text-xs rounded px-2 py-1 shadow-md",children:[s,n.jsx(j.Arrow,{className:"fill-black"})]})]}),U=j.Provider,$=p.Command,E=g.forwardRef((e,t)=>{const{className:s,...r}=e;return n.jsx(p.Command.List,{ref:t,className:N("max-h-[340px] overflow-y-auto overflow-x-hidden scroll-smooth scroll-padding",s),...r})});E.displayName=p.Command.List.displayName;const W=g.forwardRef((e,t)=>{const{className:s,...r}=e;return n.jsx(p.Command.Input,{ref:t,className:N("flex h-10 w-full border-input bg-background px-3 py-2 text-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-0 disabled:cursor-not-allowed disabled:opacity-50",s),...r})});W.displayName=p.Command.Input.displayName;const X=g.forwardRef((e,t)=>{const{className:s,...r}=e;return n.jsx(p.Command.Item,{ref:t,className:N("relative flex cursor-default select-none items-center px-2 py-1.5 text-sm outline-none transition-colors duration-200 ",s),...r})});X.displayName=p.Command.Item.displayName;const H=g.forwardRef((e,t)=>{const{className:s,...r}=e;return n.jsx(p.Command.Group,{ref:t,className:N("overflow-hidden text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-0 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",s),...r})});H.displayName=p.Command.Group.displayName;const J=g.forwardRef((e,t)=>{const{className:s,...r}=e;return n.jsx(p.Command.Separator,{ref:t,className:N("-mx-1 h-px bg-border",s),...r})});J.displayName=p.Command.Separator.displayName;const K=g.forwardRef(({className:e,...t},s)=>n.jsx(p.Command.Dialog,{ref:s,className:N("fixed inset-0 z-50 flex items-start justify-center p-4 pt-[25vh] backdrop-blur-md",e),...t,children:n.jsx("div",{className:"w-full max-w-md rounded-md bg-background shadow-lg",children:t.children})}));K.displayName=p.Command.Dialog.displayName;const Q=g.forwardRef(({className:e,...t},s)=>n.jsx("div",{ref:s,className:N("flex items-center justify-center p-4 text-sm text-muted-foreground",e),...t,children:"No results found."}));function Y({className:e,classNames:t,showOutsideDays:s=!0,...r}){return n.jsx(x.DayPicker,{showOutsideDays:s,className:N("p-3",e),classNames:{months:"flex flex-col lg:flex-row space-y-16 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-xs font-medium",nav:"space-x-1 flex items-center",nav_button:N(k({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-200"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-8 font-normal text-[0.8rem]",row:"flex w-full mt-0",cell:"h-8 w-8 text-center text-sm p-2 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:N(k({variant:"ghost"}),"h-8 w-8 hover:bg-primary-100 p-1 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary-600 text-white hover:bg-primary-600 hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:({...e})=>n.jsx(o.FontAwesomeIcon,{icon:"chevron-left",className:"w-4 h-4"}),IconRight:({...e})=>n.jsx(o.FontAwesomeIcon,{icon:"chevron-right",className:"w-4 h-4"})},...r})}Q.displayName="CommandEmpty",Y.displayName="Calendar";const Z=(e,t)=>{switch(t){case"number":return Number(e);case"date":return f(e).isValid()?new Date(e):new Date;case"boolean":return Boolean(e);case"float":return parseFloat(e);default:return e}},ee={"<":(e,t)=>e<t,">":(e,t)=>e>t,">=":(e,t)=>e>=t,"<=":(e,t)=>e<=t,"=":(e,t)=>Array.isArray(e)&&Array.isArray(t)?t.some(t=>e.includes(t)):Array.isArray(e)?e.includes(t):Array.isArray(t)?t.includes(e):e===t,"!=":(e,t)=>Array.isArray(e)&&Array.isArray(t)?!t.some(t=>e.includes(t)):Array.isArray(e)?!e.includes(t):Array.isArray(t)?!t.includes(e):e!==t,contains:(e,t)=>"string"==typeof e&&"string"==typeof t&&e.toLowerCase().includes(t.toLowerCase()),beginswith:(e,t)=>"string"==typeof e&&"string"==typeof t&&e.toLowerCase().startsWith(t.toLowerCase()),process(e,t,s){return this[s](e,t)}};function te(e,t){if(!t)return!0;if(t.operator&&Array.isArray(t.rules)&&1===t.rules.length)return te(e,t.rules[0]);if(Array.isArray(t))return t.every(t=>te(e,t));if(t.operator&&Array.isArray(t.rules)){const s=t.operator.toLowerCase();if("and"===s)return t.rules.every(t=>te(e,t));if("or"===s)return t.rules.some(t=>te(e,t))}if(t.key&&t.operator&&void 0!==t.value){const{key:s,value:r,operator:a}=t;let o=e[s];if(null==o)return("!="===a||"not_equals"===a)&&(null!=r&&""!==r);try{return ee.process(o,r,a)}catch(e){return console.warn("Filter evaluation error:",e,{key:s,value:r,operator:a,itemValue:o}),!1}}return!0}function se(e,t){if(!e)return e;return Array.isArray(e)?e.map(e=>se(e,t)):e.operator&&Array.isArray(e.rules)?{...e,rules:e.rules.map(e=>se(e,t))}:e.and?{...e,and:e.and.map(e=>se(e,t))}:e.or?{...e,or:e.or.map(e=>se(e,t))}:e.key&&((s=e.key)&&null!=t&&null!==(r=t.all)&&void 0!==r&&r.map&&"date"===(null===(a=t.all.map[s])||void 0===a?void 0:a.type))&&"string"==typeof e.value?{...e,value:new Date(e.value)}:e;var s,r,a}function re(e){return e?Array.isArray(e)?e.reduce((e,t)=>e+re(t),0):e.rules&&Array.isArray(e.rules)?re(e.rules):e.key?1:0:0}function ae({placeholder:e="Enter a date",value:t,onChange:s,format:r="yyyy MMM dd",calendarClassName:a,className:o}){const l=t?h.format(t,r):"";return n.jsxs(I,{children:[n.jsx(R,{asChild:!0,children:n.jsx(S,{variant:"outline",className:N("text-xs border-0 border-b-[1px] shadow-none p-1 justify-start text-left font-normal",!t&&"text-slate-500",o),children:t?l:n.jsx("span",{children:e})})}),n.jsx(_,{className:"p-0 w-auto",align:"start",children:n.jsx(Y,{className:N("bg-gray-100",a),classNames:{head_cell:"h-8 w-8 text-sm font-medium",cell:"h-8 w-8 text-slate-600"},mode:"single",selected:t,onSelect:e=>{s(e)},initialFocus:!0})})]})}const oe=e=>"object"==typeof e?e.path:e,ne=({selected:e,onRemove:t,onClearAll:s})=>{const r=e.slice().sort((e,t)=>{const s="object"==typeof e?e.label:e,r="object"==typeof t?t.label:t;return s.localeCompare(r)});return n.jsxs("div",{className:"relative flex items-center justify-between px-4 pt-2 pb-4 gap-2 border-b pr-8",children:[n.jsx("div",{className:"flex flex-wrap gap-2",children:r.map(e=>n.jsxs("span",{onClick:s=>{s.stopPropagation(),t(e)},className:"flex items-center bg-primary-400/10 text-[10px] px-1 py-0.5 rounded-sm cursor-pointer hover:bg-gray-200 transition",children:["object"==typeof e?e.label:e,n.jsx(o.FontAwesomeIcon,{icon:"close",className:"h-2 w-2 ml-1 text-primary-600"})]},oe(e)))}),n.jsx("div",{onClick:e=>{e.stopPropagation(),s()},className:"absolute top-1 right-2 cursor-pointer",children:n.jsx(V,{tooltipText:"Clear all",icon:"close",className:"h-4 w-4 mr-1 text-gray-500 hover:text-gray-800 transition"})})]})},le=({options:e,selected:t,onOptionSelect:s,className:r,multiple:a,isSmall:l,optionTooltip:i})=>{const d=e.slice().sort((e,t)=>{var s,r;const a=(null===(s=e.label)||void 0===s?void 0:s.toLowerCase())??"",o=(null===(r=t.label)||void 0===r?void 0:r.toLowerCase())??"";return a.localeCompare(o)});return n.jsx("div",{className:N(r),children:d.map((e,r)=>{if(e.isLoading)return n.jsx(X,{value:e.label,className:"px-4 py-2 text-sm text-gray-500 cursor-default",disabled:!0,children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(C,{className:"w-4 h-4"}),n.jsx("span",{children:e.label})]})},"loading-state");const d=a||l?t.some(t=>oe(t)===oe(e)):t&&oe(t)===oe(e);if(e.options)return n.jsx(H,{className:"px-2 mt-2 overflow-visible",heading:n.jsx("span",{className:"cursor-default font-bold text-sm text-gray-800 whitespace-nowrap",children:e.label}),children:n.jsx(le,{options:e.options,selected:t,onOptionSelect:s,multiple:a,isSmall:l,optionTooltip:i})},r);{const t=n.jsx(X,{value:e.label,className:N("px-4 cursor-pointer hover:bg-gray-100 font-light border-b border-gray-100 whitespace-nowrap",d&&"bg-primary-400/10"),onSelect:()=>s(e),children:n.jsxs("div",{className:"flex justify-between items-center w-full gap-2",children:[n.jsx("span",{className:"whitespace-nowrap",children:e.label}),d&&n.jsx(o.FontAwesomeIcon,{icon:"check",className:"text-primary-600 h-3 w-3 ml-2 flex-shrink-0"})]})},r);if(i){const s="function"==typeof i?i(e):null==i?void 0:i[e.path];return s?n.jsx(V,{tooltipText:s,side:"right",children:t},r):t}return t}})})},ie=({options:t,selected:s=[],onSelect:r,trigger:a,children:o,className:l,multiple:i=!1,isSearchable:d=!0,isSmall:c=!1,isShadow:m=!0,showSelectedSummary:u=!0,onSearchChange:p,searchPlaceholder:x="Search...",shouldFilter:f=!0,optionTooltip:h,searchFields:y=["label"]})=>{const[g,b]=e.useState(!1),[v,w]=e.useState(""),j=f?((e,t)=>{if(!t)return e;const s=t.toLowerCase(),r=(e=>{const t=[],s=e=>{e.forEach(e=>{e.options?s(e.options):e.isLoading||t.push(e)})};return s(e),t})(e).filter(e=>y.some(t=>{var r;return null===(r=e[t])||void 0===r?void 0:r.toLowerCase().includes(s)})),a=new Set(r.map(e=>e.path)),o=e=>e.map(e=>{if(e.options){const s=((e,t)=>e.toLowerCase().includes(t.toLowerCase()))(e.label,t);if(s)return{...e,matchedGroup:!0};const r=o(e.options);return r.length>0?{...e,options:r,matchedGroup:!1}:null}return e.isLoading||a.has(e.path)?e:null}).filter(Boolean);return o(e)})(t,v):t,C=e=>{if(i){const t=s.some(t=>oe(t)===oe(e))?s.filter(t=>oe(t)!==oe(e)):[...s,e];r(t)}else r(e),b(!1)};return n.jsx("div",{className:N("relative flex",l),children:n.jsxs(I,{open:g,onOpenChange:b,children:[n.jsx(R,{asChild:!0,className:"flex items-center gap-1 text-gray-500 text-sm "+(c?"border-none px-1 text-xs py-0":"border-b px-2 py-1"),children:o||a(s)}),n.jsx(_,{align:"start",sideOffset:4,className:N("bg-white border w-auto",!m&&"shadow-none"),children:n.jsx(U,{children:n.jsxs($,{shouldFilter:!1,children:[d&&n.jsx(W,{placeholder:x,className:"px-4 py-2 mb-2 border-b border-gray-300",onValueChange:e=>{w(e),p&&p(e)}}),n.jsxs(E,{children:[i&&s.length>0&&("always"===u||!1!==u&&t.length>6)&&n.jsx(ne,{selected:s,onRemove:C,onClearAll:()=>r([])}),n.jsx(le,{options:j,selected:s,onOptionSelect:C,multiple:i,isSmall:c,optionTooltip:h}),0===j.length&&n.jsx(Q,{})]})]})})})]})})},de={number:["<",">","<=",">="],string:["contains","beginswith"],date:["<",">","<=",">="],boolean:[],select:[],__all__:["=","!="]},ce={number:"number",string:"text",date:"date"},me=({removeFilter:t,filter:s,keys:r,types:a,handleFilterChange:l,options:i,keysMeta:d})=>{var c;const{key:m,id:u,operator:p,value:x}=s,f=e.useMemo(()=>m&&a[m],[m,a]),h=e.useMemo(()=>f?[...de.__all__,...de[f]]:de.__all__,[f]),y=e.useMemo(()=>ce[f]||"text",[f]),g=e.useMemo(()=>{var e;return"select"===f&&null!=i&&null!==(e=i[m])&&void 0!==e&&e.length?i[m]:[]},[f,i,m]),b=e.useMemo(()=>"date"===f&&x?Z(x,"date"):null,[f,x]),v=(e,t)=>{let s;s="key"===e?{[e]:t,operator:"=",value:Z("",a[t])}:{[e]:t},l(u,s)};return n.jsxs("div",{className:"flex gap-2 items-center w-full",children:[n.jsxs("div",{className:"flex gap-4 items-center w-full",children:[n.jsx("div",{className:"flex-shrink-0 w-[200px]",children:n.jsx(ie,{selected:m,onSelect:e=>v("key",e.path),options:r,children:n.jsxs("button",{className:"border-b-[1px] pl-2 text-sm focus:ring-0 flex items-center w-full h-9",children:[n.jsx(o.FontAwesomeIcon,{icon:"sort",className:"h-3 w-3"}),n.jsx("span",{className:"truncate",children:null===(c=d[m])||void 0===c?void 0:c.label})]})})}),n.jsx("div",{className:"flex-shrink-0 w-[75px]",children:n.jsxs(L,{onValueChange:e=>v("operator",e),value:p,children:[n.jsx(T,{iconClassName:"h-3 w-3 text-gray-500",className:"border-0 border-b-[1px] shadow-none focus:ring-0 text-sm pl-0 text-gray-600 w-full",children:n.jsx(M,{className:"text-slate-700 truncate",placeholder:"Select"})}),n.jsx(q,{className:"text-slate-700",children:h.map(e=>n.jsx(z,{value:e,children:e},e))})]})}),n.jsxs("div",{className:"flex-1",children:["select"===f&&n.jsx(ie,{options:g,selected:d[m].multiple?Array.isArray(x)?x.map(e=>g.find(t=>t.path===e)||e):[]:g.find(e=>e.path===x)||x,onSelect:e=>{const t=Array.isArray(e)?e.map(e=>e.path??e):e.path??e;v("value",t)},multiple:d[m].multiple??!1,isSearchable:!0,isSmall:!1,showSelectedSummary:!1,trigger:e=>{var t;return((e,t,s,r,a,o)=>n.jsx(A,{selected:e,leftIcon:t,rightIcon:s,className:r,iconClassName:a,placeholder:o,maxWidth:"flex-1"}))(e,"sort",null,"border-b-[1px] pl-2 text-sm focus:ring-0 flex items-center w-full h-9","mr-2",d[m].multiple?"Select":(null===(t=g.find(e=>e.path===x))||void 0===t?void 0:t.label)||"Select")}}),"date"===f&&n.jsx(ae,{placeholder:"Enter a date",value:b,format:"yyyy MMM dd",onChange:e=>v("value",e),className:"w-full text-sm",calendarClassName:"border-t-2 border-primary-600"},"date"),"boolean"===f&&n.jsx("div",{className:"flex justify-center items-center h-full text-center",children:n.jsx(V,{tooltipText:"Toggle to enable or disable",className:"mr-2 text-gray-500",children:n.jsx(B,{onCheckedChange:e=>v("value",!!e),checked:!!x,className:"w-10 h-4.5 rounded-full border-transparent transition-colors data-[state=checked]:bg-primary-700 data-[state=unchecked]:bg-gray-500",thumbStyle:"w-4 h-4 bg-white rounded-full shadow-md transform transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0"})})}),("string"===f||"number"===f)&&n.jsx(F,{defaultValue:x,placeholder:"Enter a value",onBlur:e=>{var t;return v("value",Z(null==e||null===(t=e.target)||void 0===t?void 0:t.value,f))},type:y,className:"pl-2 bg-transparent text-sm rounded-none border-t-0 border-r-0 border-b-[1px] border-l-0 focus:ring-2 focus:ring-primary-500 focus:border-transparent h-9 w-full"})]})]}),n.jsx(V,{tooltipText:"Remove item",children:n.jsx("div",{onClick:()=>t(u),className:"cursor-pointer",children:n.jsx(o.FontAwesomeIcon,{icon:"multiply"})})})]})},ue=()=>{var e;return null===(e=crypto)||void 0===e?void 0:e.randomUUID()},pe=(e={},t)=>({id:ue(),...t,...e,isGroup:!1}),xe=(e=[],t="and")=>({id:ue(),isGroup:!0,operator:t.toLowerCase(),rules:e}),fe=({onAddCondition:e,onAddGroup:t,canAddGroup:s=!0,level:r=0})=>{const a=r>=2,o="text-gray-600 font-medium cursor-pointer hover:text-primary-600 text-sm";return n.jsxs("div",{className:"flex gap-4",children:[n.jsx("span",{className:o,onClick:e,children:"+ Add condition"}),s&&(a?n.jsx(V,{tooltipText:"Filter condition can only be nested three level deep",children:n.jsx("span",{className:"text-gray-400 text-sm cursor-not-allowed",children:"+ Add condition group"})}):n.jsx("span",{className:o,onClick:t,children:"+ Add condition group"}))]})},he=({value:e,onChange:t})=>n.jsxs(L,{defaultValue:e.toUpperCase(),onValueChange:e=>t(e.toLowerCase()),children:[n.jsx(T,{iconClassName:"h-3 w-3 text-gray-500",className:"border-0 border-b-[1px] shadow-none focus:ring-0 text-sm pl-0 text-gray-600 w-[55px]",children:n.jsx(M,{})}),n.jsxs(q,{children:[n.jsx(z,{value:"AND",children:"and"}),n.jsx(z,{value:"OR",children:"or"})]})]}),ye=({group:e,onChange:t,onRemove:s,keys:r,types:a,options:l,defaultCondition:i,keysMeta:d,level:c=0,isRoot:m=!1})=>{const u=e.rules||[],p=e.operator||e.logic||"and",x=(s,r)=>{const a=u.map(e=>e.id===s?r:e);t({...e,rules:a})},f=s=>{const r=u.filter(e=>e.id!==s);t({...e,rules:r})},h=s=>{t({...e,rules:[...u,s]})},y=s=>{t({...e,operator:s.toLowerCase()})},g=!m,b=!m,v=0===u.length;return n.jsxs("div",{className:N("flex flex-col gap-4",g&&"rounded-sm py-2 px-4 border bg-gray-100"),children:[v&&b&&n.jsx("div",{className:"text-sm font-light",children:"Add conditions or sub-groups."}),u.map((e,t)=>n.jsxs("div",{className:"flex gap-2 items-start",children:[0===t?n.jsx("span",{className:"w-[55px] pt-2 text-sm font-medium text-gray-700",children:"Where"}):1===t?n.jsx(he,{value:p,onChange:y}):n.jsx("span",{className:"w-[55px] pt-2 text-sm text-gray-700",children:p}),n.jsx("div",{className:"flex-1",children:e.isGroup?n.jsx(ye,{group:e,onChange:t=>x(e.id,t),onRemove:()=>f(e.id),keys:r,types:a,options:l,defaultCondition:i,keysMeta:d,level:c+1,isRoot:!1}):n.jsx(me,{filter:e,handleFilterChange:(t,s)=>x(e.id,{...e,...s}),removeFilter:()=>f(e.id),types:a,keys:r,options:l,keysMeta:d})})]},e.id)),b&&n.jsxs("div",{className:"flex justify-between gap-10 items-center pt-2 border-t border-gray-200",children:[n.jsx(fe,{onAddCondition:()=>h(pe({},i)),onAddGroup:()=>h(xe()),level:c}),n.jsx(V,{tooltipText:"Remove group",children:n.jsx("button",{onClick:s,className:"text-gray-600 hover:text-gray-900 transition-colors",children:n.jsx(o.FontAwesomeIcon,{icon:"multiply"})})})]})]})},ge=({onAddCondition:e,onAddGroup:t})=>n.jsxs("div",{className:"flex gap-6",children:[n.jsx("span",{className:"text-gray-600 font-medium cursor-pointer hover:text-primary-600 text-sm",onClick:e,children:"+ Add condition"}),n.jsx("span",{className:"text-gray-600 font-medium cursor-pointer hover:text-primary-600 text-sm",onClick:t,children:"+ Add condition group"})]}),be=e=>{if(!e)return null;if(!e.isGroup){const{id:t,isGroup:s,...r}=e;return r.key&&r.operator?r:null}const t=(e.rules||[]).map(e=>be(e)).filter(Boolean);return 0===t.length?null:{operator:e.operator||"and",rules:t}},ve=e=>{return e&&e.operator&&Array.isArray(e.rules)?{id:null===(t=crypto)||void 0===t?void 0:t.randomUUID(),isGroup:!0,operator:e.operator,rules:e.rules.map(e=>{return e.operator&&e.rules?ve(e):{id:null===(t=crypto)||void 0===t?void 0:t.randomUUID(),isGroup:!1,...e};var t})}:null;var t},we=({keys:t,types:s,initialFilters:r,updateFilters:a,options:l,defaultCondition:i,keysMeta:d,closePopover:c})=>{const[m,u]=e.useState(()=>r?r.isGroup?r:ve(r):null),p=((null==m?void 0:m.rules)||[]).length>0,x=Boolean(m&&p),f=e=>{if(!m)return;const t=m.rules||[];u({...m,rules:[...t,e]})};return e.useEffect(()=>{if(r){const e=r.isGroup?r:ve(r);u(e)}},[r]),n.jsxs("div",{className:"text-slate-600 w-full",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(o.FontAwesomeIcon,{icon:"filter",className:"text-primary-700",size:"lg"}),n.jsx("h2",{className:"text-lg font-medium text-gray-800",children:"Filter"})]}),m?n.jsxs(n.Fragment,{children:[x&&n.jsx("div",{className:"flex gap-2 items-start mb-4",children:n.jsx("div",{className:"flex-1",children:n.jsx(ye,{group:m,onChange:u,onRemove:()=>u(null),keys:t,types:s,options:l,defaultCondition:i,keysMeta:d,level:0,isRoot:!0})})}),n.jsxs("div",{className:"flex justify-between items-center gap-10",children:[n.jsx(ge,{onAddCondition:()=>f(pe({},i)),onAddGroup:()=>f(xe())}),n.jsxs(S,{className:"rounded-sm shadow-sm text-xs transition-all hover:shadow-md",onClick:()=>{const e=be(m);a(e),c()},children:[n.jsx(o.FontAwesomeIcon,{icon:"filter",className:"mr-1",size:"sm"}),n.jsx("span",{children:"Apply"})]})]})]}):n.jsx(ge,{onAddCondition:()=>{u(xe([pe({},i)]))},onAddGroup:()=>{const e=xe();u(xe([e]))}})]})};function je({className:e,closePopover:t,options:s,filterData:r,defaultCondition:a,filters:o,updateFilters:l,keysMeta:i}){return n.jsx("div",{className:N(e),children:n.jsx(we,{keys:(null==r?void 0:r.fields)||[],types:(null==r?void 0:r.types)||{},initialFilters:o,updateFilters:l,options:s,defaultCondition:a,keysMeta:i,closePopover:t})})}exports.FilterPopover=function({options:t,filterData:s,defaultCondition:r,filters:a,updateFilters:l,keysMeta:i,buttonText:d,buttonIcon:c="filter",buttonClassName:m,buttonSize:u="default",badgeClassName:p,showBadge:x=!0,popoverClassName:f,popoverContentClassName:h,variant:y="default",renderTrigger:g}){const[b,v]=e.useState(!1),w=re(a),j=()=>v(!b),N={sm:"h-8 w-8 text-sm",default:"h-10 w-10 text-lg",lg:"h-12 w-12 text-xl"},C={default:"",outline:"border-2 border-slate-300 bg-white hover:bg-slate-50",ghost:"bg-transparent hover:bg-slate-100 shadow-none",text:"bg-transparent shadow-none hover:bg-slate-50"},A=()=>n.jsxs(S,{className:`\n        rounded-sm shadow-lg relative\n        ${d?"w-auto px-4 gap-2":N[u]}\n        ${C[y]}\n        ${m||""}\n      `,children:[c&&n.jsx(o.FontAwesomeIcon,{icon:c}),d&&n.jsx("span",{children:d}),x&&w>0&&n.jsx("span",{className:`\n            absolute top-0 right-0 text-xs bg-primary-600 text-white \n            rounded-full w-5 h-5 flex items-center justify-center text-center \n            -mr-2 -mt-2\n            ${p||""}\n          `,children:w})]});return n.jsxs(I,{className:`z-10 ${f||""}`,style:{zIndex:10},open:b,onOpenChange:j,children:[n.jsx(R,{asChild:!0,children:g?g({filterCount:w,isOpen:b,toggle:j}):n.jsx(A,{})}),n.jsx(_,{className:`\n          max-w-[60vw] w-auto max-h-[70vh] overflow-y-auto \n          rounded-none bg-gray-50 border-t-2 border-t-primary-700 p-6\n          ${h||""}\n        `,children:n.jsx(U,{children:n.jsx(je,{closePopover:()=>v(!1),options:t,filterData:s,defaultCondition:r,filters:a,updateFilters:l,keysMeta:i})})})]})},exports.applyFilterFn=(e,t,s,r)=>{if(!t)return Array.isArray(e)?[...e]:[];const a=se(t,r);return e.filter(e=>te(s&&s[e.id]?s[e.id]:e,a))};
//# sourceMappingURL=index.js.map
