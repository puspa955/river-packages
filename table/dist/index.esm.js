import*as e from"react";import{forwardRef as t,useState as r,useMemo as a,useEffect as s}from"react";import{useReactTable as n,getPaginationRowModel as l,getFilteredRowModel as i,getSortedRowModel as o,getCoreRowModel as d,flexRender as c}from"@tanstack/react-table";import{Search as u,X as m,AlertCircle as p,Database as h,ChevronsLeft as f,ChevronLeft as g,ChevronRight as y,ChevronsRight as b,ChevronUp as x,ChevronDown as v,ChevronsUpDown as w}from"lucide-react";import{Slot as N}from"@radix-ui/react-slot";import{cva as C}from"class-variance-authority";import{clsx as k}from"clsx";import{twMerge as S}from"tailwind-merge";import{FontAwesomeIcon as $}from"@fortawesome/react-fontawesome";import{jsx as A,jsxs as M,Fragment as D}from"react/jsx-runtime";import*as _ from"@radix-ui/react-popover";import{config as R,library as P}from"@fortawesome/fontawesome-svg-core";import{faCheck as F,faXmark as j,faFilter as O}from"@fortawesome/free-solid-svg-icons";import*as T from"@radix-ui/react-select";import*as I from"@radix-ui/react-switch";import*as L from"@radix-ui/react-tooltip";import{Command as z}from"cmdk";import{DayPicker as G}from"react-day-picker";import{format as H}from"date-fns";function U(...e){return S(k(e))}const V=({className:e})=>A($,{icon:"spinner",className:U("animate-spin text-primary-600",e)}),W=t(({selected:e,leftIcon:t,rightIcon:r,className:a,iconClassName:s,placeholder:n,maxWidth:l="max-w-20",...i},o)=>M("button",{ref:o,className:U("flex items-center border-b pb-1 px-2 text-gray-500 text-sm font-light cursor-pointer min-w-0 overflow-hidden",a),...i,children:[M("div",{className:"flex text-start items-center justify-center truncate min-w-0",children:[t&&A($,{icon:t,className:U("h-3 w-3 text-secondary-500 flex-shrink-0",s)}),A("span",{className:`truncate min-w-0 ${l} ${t?"pl-1":""}`,children:e&&e.length?Array.isArray(e)?`${e.length} selected`:e.label:n})]}),r&&A($,{icon:r,className:"h-3 w-3 pl-1 flex-shrink-0"})]}));W.displayName="SelectTrigger";const Y=C("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary-700 text-primary-50 shadow hover:bg-primary-800",danger:"bg-red-700 text-red-50 shadow-sm hover:bg-red-800",outline:"border border-input shadow-sm hover:bg-gray-100",secondary:"bg-secondary-700 text-secondary-50 shadow-sm hover:bg-secondary-800",ghost:"hover:bg-primary-50",link:"text-primary-800 underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),B=t(({className:e,variant:t,size:r,asChild:a=!1,loading:s=!1,children:n,...l},i)=>{const o=a?N:"button",d=a?M("span",{className:"inline-flex items-center",children:[s&&A(V,{className:"mr-2 h-4 w-4 animate-spin text-current"}),n]}):M(D,{children:[s&&A(V,{className:"mr-2 h-4 w-4 animate-spin text-current"}),n]});return A(o,{className:U(Y({variant:t,size:r,className:e})),title:l.title,ref:i,disabled:l.disabled||s,...l,children:d})});B.displayName="Button";const E=e.forwardRef(({className:e,type:t,...r},a)=>A("input",{type:t,className:U("flex w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-0 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...r}));E.displayName="Input";const J=_.Root,Z=_.Trigger,q=e.forwardRef(({className:e,align:t="center",sideOffset:r=4,...a},s)=>A(_.Portal,{children:A(_.Content,{ref:s,align:t,sideOffset:r,className:U("bg-popover text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...a})}));q.displayName=_.Content.displayName,R.autoAddCss=!1,P.add(F,j,O);const Q=T.Root,X=T.Value,K=e.forwardRef(({iconClassName:e,className:t,isIconShow:r=!0,children:a,...s},n)=>M(T.Trigger,{ref:n,className:U("flex h-9 w-full items-center whitespace-nowrap rounded-sm border bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...s,children:[A(T.Icon,{asChild:!0,children:r&&A($,{icon:"sort",className:U("mr-2 w-4 h-4",e)})}),a]}));K.displayName=T.Trigger.displayName;const ee=e.forwardRef(({className:e,...t},r)=>A(T.ScrollUpButton,{ref:r,className:U("flex justify-center items-center py-1 cursor-default",e),...t,children:A($,{icon:"chevron-up"})}));ee.displayName=T.ScrollUpButton.displayName;const te=e.forwardRef(({className:e,...t},r)=>A(T.ScrollDownButton,{ref:r,className:U("flex justify-center items-center py-1 cursor-default",e),...t,children:A($,{icon:"chevron-down"})}));te.displayName=T.ScrollDownButton.displayName;const re=e.forwardRef(({className:e,children:t,position:r="popper",...a},s)=>A(T.Portal,{children:M(T.Content,{ref:s,className:U("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-sm border bg-white text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...a,children:[A(ee,{}),A(T.Viewport,{className:U("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),A(te,{})]})}));re.displayName=T.Content.displayName,e.forwardRef(({className:e,...t},r)=>A(T.Label,{ref:r,className:U("px-2 py-1.5 text-sm font-semibold opacity-70",e),...t})).displayName=T.Label.displayName;const ae=e.forwardRef(({className:e,children:t,...r},a)=>M(T.Item,{ref:a,className:U("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-slate-100 focus:text-primary-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[A("span",{className:"flex absolute right-2 justify-center items-center w-3.5 h-3.5",children:A(T.ItemIndicator,{children:A($,{icon:"check",className:"w-4 h-4"})})}),A(T.ItemText,{children:t})]}));ae.displayName=T.Item.displayName,e.forwardRef(({className:e,...t},r)=>A(T.Separator,{ref:r,className:U("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=T.Separator.displayName;const se=e.forwardRef(({className:e,thumbStyle:t,...r},a)=>A(I.Root,{className:U("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary-600 data-[state=unchecked]:bg-gray-400",e),...r,ref:a,children:A(I.Thumb,{className:U("pointer-events-none block h-5 w-5 rounded-full bg-primary-300 shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0",t)})}));se.displayName=I.Root.displayName;const ne=({icon:e,children:t,tooltipText:r,side:a="top",className:s})=>M(L.Root,{delayDuration:0,children:[A(L.Trigger,{asChild:!0,children:M("span",{children:[e&&A($,{icon:e,className:s}),t]})}),M(L.Content,{side:a,className:"bg-black text-white text-xs rounded px-2 py-1 shadow-md",children:[r,A(L.Arrow,{className:"fill-black"})]})]}),le=L.Provider,ie=z,oe=e.forwardRef((e,t)=>{const{className:r,...a}=e;return A(z.List,{ref:t,className:U("max-h-[340px] overflow-y-auto overflow-x-hidden scroll-smooth scroll-padding",r),...a})});oe.displayName=z.List.displayName;const de=e.forwardRef((e,t)=>{const{className:r,...a}=e;return A(z.Input,{ref:t,className:U("flex h-10 w-full border-input bg-background px-3 py-2 text-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-0 disabled:cursor-not-allowed disabled:opacity-50",r),...a})});de.displayName=z.Input.displayName;const ce=e.forwardRef((e,t)=>{const{className:r,...a}=e;return A(z.Item,{ref:t,className:U("relative flex cursor-default select-none items-center px-2 py-1.5 text-sm outline-none transition-colors duration-200 ",r),...a})});ce.displayName=z.Item.displayName;const ue=e.forwardRef((e,t)=>{const{className:r,...a}=e;return A(z.Group,{ref:t,className:U("overflow-hidden text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-0 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",r),...a})});ue.displayName=z.Group.displayName,e.forwardRef((e,t)=>{const{className:r,...a}=e;return A(z.Separator,{ref:t,className:U("-mx-1 h-px bg-border",r),...a})}).displayName=z.Separator.displayName,e.forwardRef(({className:e,...t},r)=>A(z.Dialog,{ref:r,className:U("fixed inset-0 z-50 flex items-start justify-center p-4 pt-[25vh] backdrop-blur-md",e),...t,children:A("div",{className:"w-full max-w-md rounded-md bg-background shadow-lg",children:t.children})})).displayName=z.Dialog.displayName;const me=e.forwardRef(({className:e,...t},r)=>A("div",{ref:r,className:U("flex items-center justify-center p-4 text-sm text-muted-foreground",e),...t,children:"No results found."}));function pe({className:e,classNames:t,showOutsideDays:r=!0,...a}){return A(G,{showOutsideDays:r,className:U("p-3",e),classNames:{months:"flex flex-col lg:flex-row space-y-16 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-xs font-medium",nav:"space-x-1 flex items-center",nav_button:U(Y({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-200"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-8 font-normal text-[0.8rem]",row:"flex w-full mt-0",cell:"h-8 w-8 text-center text-sm p-2 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:U(Y({variant:"ghost"}),"h-8 w-8 hover:bg-primary-100 p-1 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary-600 text-white hover:bg-primary-600 hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:({...e})=>A($,{icon:"chevron-left",className:"w-4 h-4"}),IconRight:({...e})=>A($,{icon:"chevron-right",className:"w-4 h-4"})},...a})}me.displayName="CommandEmpty",pe.displayName="Calendar";var he=6e4,fe=36e5,ge="millisecond",ye="second",be="minute",xe="hour",ve="day",we="week",Ne="month",Ce="quarter",ke="year",Se="date",$e="Invalid Date",Ae=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,Me=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,De={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],r=e%100;return"["+e+(t[(r-20)%10]||t[r]||t[0])+"]"}},_e=function(e,t,r){var a=String(e);return!a||a.length>=t?e:""+Array(t+1-a.length).join(r)+e},Re={s:_e,z:function(e){var t=-e.utcOffset(),r=Math.abs(t),a=Math.floor(r/60),s=r%60;return(t<=0?"+":"-")+_e(a,2,"0")+":"+_e(s,2,"0")},m:function e(t,r){if(t.date()<r.date())return-e(r,t);var a=12*(r.year()-t.year())+(r.month()-t.month()),s=t.clone().add(a,Ne),n=r-s<0,l=t.clone().add(a+(n?-1:1),Ne);return+(-(a+(r-s)/(n?s-l:l-s))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:Ne,y:ke,w:we,d:ve,D:Se,h:xe,m:be,s:ye,ms:ge,Q:Ce}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},Pe="en",Fe={};Fe[Pe]=De;var je="$isDayjsObject",Oe=function(e){return e instanceof ze||!(!e||!e[je])},Te=function e(t,r,a){var s;if(!t)return Pe;if("string"==typeof t){var n=t.toLowerCase();Fe[n]&&(s=n),r&&(Fe[n]=r,s=n);var l=t.split("-");if(!s&&l.length>1)return e(l[0])}else{var i=t.name;Fe[i]=t,s=i}return!a&&s&&(Pe=s),s||!a&&Pe},Ie=function(e,t){if(Oe(e))return e.clone();var r="object"==typeof t?t:{};return r.date=e,r.args=arguments,new ze(r)},Le=Re;Le.l=Te,Le.i=Oe,Le.w=function(e,t){return Ie(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var ze=function(){function e(e){this.$L=Te(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[je]=!0}var t=e.prototype;return t.parse=function(e){this.$d=function(e){var t=e.date,r=e.utc;if(null===t)return new Date(NaN);if(Le.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var a=t.match(Ae);if(a){var s=a[2]-1||0,n=(a[7]||"0").substring(0,3);return r?new Date(Date.UTC(a[1],s,a[3]||1,a[4]||0,a[5]||0,a[6]||0,n)):new Date(a[1],s,a[3]||1,a[4]||0,a[5]||0,a[6]||0,n)}}return new Date(t)}(e),this.init()},t.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},t.$utils=function(){return Le},t.isValid=function(){return!(this.$d.toString()===$e)},t.isSame=function(e,t){var r=Ie(e);return this.startOf(t)<=r&&r<=this.endOf(t)},t.isAfter=function(e,t){return Ie(e)<this.startOf(t)},t.isBefore=function(e,t){return this.endOf(t)<Ie(e)},t.$g=function(e,t,r){return Le.u(e)?this[t]:this.set(r,e)},t.unix=function(){return Math.floor(this.valueOf()/1e3)},t.valueOf=function(){return this.$d.getTime()},t.startOf=function(e,t){var r=this,a=!!Le.u(t)||t,s=Le.p(e),n=function(e,t){var s=Le.w(r.$u?Date.UTC(r.$y,t,e):new Date(r.$y,t,e),r);return a?s:s.endOf(ve)},l=function(e,t){return Le.w(r.toDate()[e].apply(r.toDate("s"),(a?[0,0,0,0]:[23,59,59,999]).slice(t)),r)},i=this.$W,o=this.$M,d=this.$D,c="set"+(this.$u?"UTC":"");switch(s){case ke:return a?n(1,0):n(31,11);case Ne:return a?n(1,o):n(0,o+1);case we:var u=this.$locale().weekStart||0,m=(i<u?i+7:i)-u;return n(a?d-m:d+(6-m),o);case ve:case Se:return l(c+"Hours",0);case xe:return l(c+"Minutes",1);case be:return l(c+"Seconds",2);case ye:return l(c+"Milliseconds",3);default:return this.clone()}},t.endOf=function(e){return this.startOf(e,!1)},t.$set=function(e,t){var r,a=Le.p(e),s="set"+(this.$u?"UTC":""),n=(r={},r[ve]=s+"Date",r[Se]=s+"Date",r[Ne]=s+"Month",r[ke]=s+"FullYear",r[xe]=s+"Hours",r[be]=s+"Minutes",r[ye]=s+"Seconds",r[ge]=s+"Milliseconds",r)[a],l=a===ve?this.$D+(t-this.$W):t;if(a===Ne||a===ke){var i=this.clone().set(Se,1);i.$d[n](l),i.init(),this.$d=i.set(Se,Math.min(this.$D,i.daysInMonth())).$d}else n&&this.$d[n](l);return this.init(),this},t.set=function(e,t){return this.clone().$set(e,t)},t.get=function(e){return this[Le.p(e)]()},t.add=function(e,t){var r,a=this;e=Number(e);var s=Le.p(t),n=function(t){var r=Ie(a);return Le.w(r.date(r.date()+Math.round(t*e)),a)};if(s===Ne)return this.set(Ne,this.$M+e);if(s===ke)return this.set(ke,this.$y+e);if(s===ve)return n(1);if(s===we)return n(7);var l=(r={},r[be]=he,r[xe]=fe,r[ye]=1e3,r)[s]||1,i=this.$d.getTime()+e*l;return Le.w(i,this)},t.subtract=function(e,t){return this.add(-1*e,t)},t.format=function(e){var t=this,r=this.$locale();if(!this.isValid())return r.invalidDate||$e;var a=e||"YYYY-MM-DDTHH:mm:ssZ",s=Le.z(this),n=this.$H,l=this.$m,i=this.$M,o=r.weekdays,d=r.months,c=r.meridiem,u=function(e,r,s,n){return e&&(e[r]||e(t,a))||s[r].slice(0,n)},m=function(e){return Le.s(n%12||12,e,"0")},p=c||function(e,t,r){var a=e<12?"AM":"PM";return r?a.toLowerCase():a};return a.replace(Me,function(e,a){return a||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return Le.s(t.$y,4,"0");case"M":return i+1;case"MM":return Le.s(i+1,2,"0");case"MMM":return u(r.monthsShort,i,d,3);case"MMMM":return u(d,i);case"D":return t.$D;case"DD":return Le.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return u(r.weekdaysMin,t.$W,o,2);case"ddd":return u(r.weekdaysShort,t.$W,o,3);case"dddd":return o[t.$W];case"H":return String(n);case"HH":return Le.s(n,2,"0");case"h":return m(1);case"hh":return m(2);case"a":return p(n,l,!0);case"A":return p(n,l,!1);case"m":return String(l);case"mm":return Le.s(l,2,"0");case"s":return String(t.$s);case"ss":return Le.s(t.$s,2,"0");case"SSS":return Le.s(t.$ms,3,"0");case"Z":return s}return null}(e)||s.replace(":","")})},t.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},t.diff=function(e,t,r){var a,s=this,n=Le.p(t),l=Ie(e),i=(l.utcOffset()-this.utcOffset())*he,o=this-l,d=function(){return Le.m(s,l)};switch(n){case ke:a=d()/12;break;case Ne:a=d();break;case Ce:a=d()/3;break;case we:a=(o-i)/6048e5;break;case ve:a=(o-i)/864e5;break;case xe:a=o/fe;break;case be:a=o/he;break;case ye:a=o/1e3;break;default:a=o}return r?a:Le.a(a)},t.daysInMonth=function(){return this.endOf(Ne).$D},t.$locale=function(){return Fe[this.$L]},t.locale=function(e,t){if(!e)return this.$L;var r=this.clone(),a=Te(e,t,!0);return a&&(r.$L=a),r},t.clone=function(){return Le.w(this.$d,this)},t.toDate=function(){return new Date(this.valueOf())},t.toJSON=function(){return this.isValid()?this.toISOString():null},t.toISOString=function(){return this.$d.toISOString()},t.toString=function(){return this.$d.toUTCString()},e}(),Ge=ze.prototype;Ie.prototype=Ge,[["$ms",ge],["$s",ye],["$m",be],["$H",xe],["$W",ve],["$M",Ne],["$y",ke],["$D",Se]].forEach(function(e){Ge[e[1]]=function(t){return this.$g(t,e[0],e[1])}}),Ie.extend=function(e,t){return e.$i||(e(t,ze,Ie),e.$i=!0),Ie},Ie.locale=Te,Ie.isDayjs=Oe,Ie.unix=function(e){return Ie(1e3*e)},Ie.en=Fe[Pe],Ie.Ls=Fe,Ie.p={};const He=(e,t)=>{switch(t){case"number":return Number(e);case"date":return Ie(e).isValid()?new Date(e):new Date;case"boolean":return Boolean(e);case"float":return parseFloat(e);default:return e}},Ue={"<":(e,t)=>e<t,">":(e,t)=>e>t,">=":(e,t)=>e>=t,"<=":(e,t)=>e<=t,"=":(e,t)=>Array.isArray(e)&&Array.isArray(t)?t.some(t=>e.includes(t)):Array.isArray(e)?e.includes(t):Array.isArray(t)?t.includes(e):e===t,"!=":(e,t)=>Array.isArray(e)&&Array.isArray(t)?!t.some(t=>e.includes(t)):Array.isArray(e)?!e.includes(t):Array.isArray(t)?!t.includes(e):e!==t,contains:(e,t)=>"string"==typeof e&&"string"==typeof t&&e.toLowerCase().includes(t.toLowerCase()),beginswith:(e,t)=>"string"==typeof e&&"string"==typeof t&&e.toLowerCase().startsWith(t.toLowerCase()),process(e,t,r){return this[r](e,t)}};function Ve(e,t){if(!t)return!0;if(t.operator&&Array.isArray(t.rules)&&1===t.rules.length)return Ve(e,t.rules[0]);if(Array.isArray(t))return t.every(t=>Ve(e,t));if(t.operator&&Array.isArray(t.rules)){const r=t.operator.toLowerCase();if("and"===r)return t.rules.every(t=>Ve(e,t));if("or"===r)return t.rules.some(t=>Ve(e,t))}if(t.key&&t.operator&&void 0!==t.value){const{key:r,value:a,operator:s}=t;let n=e[r];if(null==n)return("!="===s||"not_equals"===s)&&null!=a&&""!==a;try{return Ue.process(n,a,s)}catch(e){return console.warn("Filter evaluation error:",e,{key:r,value:a,operator:s,itemValue:n}),!1}}return!0}function We(e,t){return e?Array.isArray(e)?e.map(e=>We(e,t)):e.operator&&Array.isArray(e.rules)?{...e,rules:e.rules.map(e=>We(e,t))}:e.and?{...e,and:e.and.map(e=>We(e,t))}:e.or?{...e,or:e.or.map(e=>We(e,t))}:e.key&&(r=e.key)&&null!=t&&null!==(a=t.all)&&void 0!==a&&a.map&&"date"===(null===(s=t.all.map[r])||void 0===s?void 0:s.type)&&"string"==typeof e.value?{...e,value:new Date(e.value)}:e:e;var r,a,s}const Ye=(e,t,r,a)=>{if(!t)return Array.isArray(e)?[...e]:[];const s=We(t,a);return e.filter(e=>Ve(e,s))};function Be(e){return e?Array.isArray(e)?e.reduce((e,t)=>e+Be(t),0):e.rules&&Array.isArray(e.rules)?Be(e.rules):e.key?1:0:0}function Ee({placeholder:e="Enter a date",value:t,onChange:r,format:a="yyyy MMM dd",calendarClassName:s,className:n}){const l=t?H(t,a):"";return M(J,{children:[A(Z,{asChild:!0,children:A(B,{variant:"outline",className:U("text-xs border-0 border-b-[1px] shadow-none p-1 justify-start text-left font-normal",!t&&"text-slate-500",n),children:t?l:A("span",{children:e})})}),A(q,{className:"p-0 w-auto",align:"start",children:A(pe,{className:U("bg-gray-100",s),classNames:{head_cell:"h-8 w-8 text-sm font-medium",cell:"h-8 w-8 text-slate-600"},mode:"single",selected:t,onSelect:e=>{r(e)},initialFocus:!0})})]})}const Je=e=>"object"==typeof e?e.path:e,Ze=({selected:e,onRemove:t,onClearAll:r})=>{const a=e.slice().sort((e,t)=>{const r="object"==typeof e?e.label:e,a="object"==typeof t?t.label:t;return r.localeCompare(a)});return M("div",{className:"relative flex items-center justify-between px-4 pt-2 pb-4 gap-2 border-b pr-8",children:[A("div",{className:"flex flex-wrap gap-2",children:a.map(e=>M("span",{onClick:r=>{r.stopPropagation(),t(e)},className:"flex items-center bg-primary-400/10 text-[10px] px-1 py-0.5 rounded-sm cursor-pointer hover:bg-gray-200 transition",children:["object"==typeof e?e.label:e,A($,{icon:"close",className:"h-2 w-2 ml-1 text-primary-600"})]},Je(e)))}),A("div",{onClick:e=>{e.stopPropagation(),r()},className:"absolute top-1 right-2 cursor-pointer",children:A(ne,{tooltipText:"Clear all",icon:"close",className:"h-4 w-4 mr-1 text-gray-500 hover:text-gray-800 transition"})})]})},qe=({options:e,selected:t,onOptionSelect:r,className:a,multiple:s,isSmall:n,optionTooltip:l})=>{const i=e.slice().sort((e,t)=>{var r,a;const s=(null===(r=e.label)||void 0===r?void 0:r.toLowerCase())??"",n=(null===(a=t.label)||void 0===a?void 0:a.toLowerCase())??"";return s.localeCompare(n)});return A("div",{className:U(a),children:i.map((e,a)=>{if(e.isLoading)return A(ce,{value:e.label,className:"px-4 py-2 text-sm text-gray-500 cursor-default",disabled:!0,children:M("div",{className:"flex items-center gap-2",children:[A(V,{className:"w-4 h-4"}),A("span",{children:e.label})]})},"loading-state");const i=s||n?t.some(t=>Je(t)===Je(e)):t&&Je(t)===Je(e);if(e.options)return A(ue,{className:"px-2 mt-2 overflow-visible",heading:A("span",{className:"cursor-default font-bold text-sm text-gray-800 whitespace-nowrap",children:e.label}),children:A(qe,{options:e.options,selected:t,onOptionSelect:r,multiple:s,isSmall:n,optionTooltip:l})},a);{const t=A(ce,{value:e.label,className:U("px-4 cursor-pointer hover:bg-gray-100 font-light border-b border-gray-100 whitespace-nowrap",i&&"bg-primary-400/10"),onSelect:()=>r(e),children:M("div",{className:"flex justify-between items-center w-full gap-2",children:[A("span",{className:"whitespace-nowrap",children:e.label}),i&&A($,{icon:"check",className:"text-primary-600 h-3 w-3 ml-2 flex-shrink-0"})]})},a);if(l){const r="function"==typeof l?l(e):null==l?void 0:l[e.path];return r?A(ne,{tooltipText:r,side:"right",children:t},a):t}return t}})})},Qe=({options:e,selected:t=[],onSelect:a,trigger:s,children:n,className:l,multiple:i=!1,isSearchable:o=!0,isSmall:d=!1,isShadow:c=!0,showSelectedSummary:u=!0,onSearchChange:m,searchPlaceholder:p="Search...",shouldFilter:h=!0,optionTooltip:f,searchFields:g=["label"]})=>{const[y,b]=r(!1),[x,v]=r(""),w=h?((e,t)=>{if(!t)return e;const r=t.toLowerCase(),a=(e=>{const t=[],r=e=>{e.forEach(e=>{e.options?r(e.options):e.isLoading||t.push(e)})};return r(e),t})(e).filter(e=>g.some(t=>{var a;return null===(a=e[t])||void 0===a?void 0:a.toLowerCase().includes(r)})),s=new Set(a.map(e=>e.path)),n=e=>e.map(e=>{if(e.options){const r=((e,t)=>e.toLowerCase().includes(t.toLowerCase()))(e.label,t);if(r)return{...e,matchedGroup:!0};const a=n(e.options);return a.length>0?{...e,options:a,matchedGroup:!1}:null}return e.isLoading||s.has(e.path)?e:null}).filter(Boolean);return n(e)})(e,x):e,N=e=>{if(i){const r=t.some(t=>Je(t)===Je(e))?t.filter(t=>Je(t)!==Je(e)):[...t,e];a(r)}else a(e),b(!1)};return A("div",{className:U("relative flex",l),children:M(J,{open:y,onOpenChange:b,children:[A(Z,{asChild:!0,className:"flex items-center gap-1 text-gray-500 text-sm "+(d?"border-none px-1 text-xs py-0":"border-b px-2 py-1"),children:n||s(t)}),A(q,{align:"start",sideOffset:4,className:U("bg-white border w-auto",!c&&"shadow-none"),children:A(le,{children:M(ie,{shouldFilter:!1,children:[o&&A(de,{placeholder:p,className:"px-4 py-2 mb-2 border-b border-gray-300",onValueChange:e=>{v(e),m&&m(e)}}),M(oe,{children:[i&&t.length>0&&("always"===u||!1!==u&&e.length>6)&&A(Ze,{selected:t,onRemove:N,onClearAll:()=>a([])}),A(qe,{options:w,selected:t,onOptionSelect:N,multiple:i,isSmall:d,optionTooltip:f}),0===w.length&&A(me,{})]})]})})})]})})},Xe={number:["<",">","<=",">="],string:["contains","beginswith"],date:["<",">","<=",">="],boolean:[],select:[],__all__:["=","!="]},Ke={number:"number",string:"text",date:"date"},et=({removeFilter:e,filter:t,keys:r,types:s,handleFilterChange:n,options:l,keysMeta:i})=>{var o;const{key:d,id:c,operator:u,value:m}=t,p=a(()=>d&&s[d],[d,s]),h=a(()=>p?[...Xe.__all__,...Xe[p]]:Xe.__all__,[p]),f=a(()=>Ke[p]||"text",[p]),g=a(()=>{var e;return"select"===p&&null!=l&&null!==(e=l[d])&&void 0!==e&&e.length?l[d]:[]},[p,l,d]),y=a(()=>"date"===p&&m?He(m,"date"):null,[p,m]),b=(e,t)=>{let r;r="key"===e?{[e]:t,operator:"=",value:He("",s[t])}:{[e]:t},n(c,r)};return M("div",{className:"flex gap-2 items-center w-full",children:[M("div",{className:"flex gap-4 items-center w-full",children:[A("div",{className:"flex-shrink-0 w-[200px]",children:A(Qe,{selected:d,onSelect:e=>b("key",e.path),options:r,children:M("button",{className:"border-b-[1px] pl-2 text-sm focus:ring-0 flex items-center w-full h-9",children:[A($,{icon:"sort",className:"h-3 w-3"}),A("span",{className:"truncate",children:null===(o=i[d])||void 0===o?void 0:o.label})]})})}),A("div",{className:"flex-shrink-0 w-[75px]",children:M(Q,{onValueChange:e=>b("operator",e),value:u,children:[A(K,{iconClassName:"h-3 w-3 text-gray-500",className:"border-0 border-b-[1px] shadow-none focus:ring-0 text-sm pl-0 text-gray-600 w-full",children:A(X,{className:"text-slate-700 truncate",placeholder:"Select"})}),A(re,{className:"text-slate-700",children:h.map(e=>A(ae,{value:e,children:e},e))})]})}),M("div",{className:"flex-1",children:["select"===p&&A(Qe,{options:g,selected:i[d].multiple?Array.isArray(m)?m.map(e=>g.find(t=>t.path===e)||e):[]:g.find(e=>e.path===m)||m,onSelect:e=>{const t=Array.isArray(e)?e.map(e=>e.path??e):e.path??e;b("value",t)},multiple:i[d].multiple??!1,isSearchable:!0,isSmall:!1,showSelectedSummary:!1,trigger:e=>{var t;return((e,t,r,a,s,n)=>A(W,{selected:e,leftIcon:"sort",rightIcon:null,className:"border-b-[1px] pl-2 text-sm focus:ring-0 flex items-center w-full h-9",iconClassName:"mr-2",placeholder:n,maxWidth:"flex-1"}))(e,0,0,0,0,i[d].multiple?"Select":(null===(t=g.find(e=>e.path===m))||void 0===t?void 0:t.label)||"Select")}}),"date"===p&&A(Ee,{placeholder:"Enter a date",value:y,format:"yyyy MMM dd",onChange:e=>b("value",e),className:"w-full text-sm",calendarClassName:"border-t-2 border-primary-600"},"date"),"boolean"===p&&A("div",{className:"flex justify-center items-center h-full text-center",children:A(ne,{tooltipText:"Toggle to enable or disable",className:"mr-2 text-gray-500",children:A(se,{onCheckedChange:e=>b("value",!!e),checked:!!m,className:"w-10 h-4.5 rounded-full border-transparent transition-colors data-[state=checked]:bg-primary-700 data-[state=unchecked]:bg-gray-500",thumbStyle:"w-4 h-4 bg-white rounded-full shadow-md transform transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0"})})}),("string"===p||"number"===p)&&A(E,{defaultValue:m,placeholder:"Enter a value",onBlur:e=>{var t;return b("value",He(null==e||null===(t=e.target)||void 0===t?void 0:t.value,p))},type:f,className:"pl-2 bg-transparent text-sm rounded-none border-t-0 border-r-0 border-b-[1px] border-l-0 focus:ring-2 focus:ring-primary-500 focus:border-transparent h-9 w-full"})]})]}),A(ne,{tooltipText:"Remove item",children:A("div",{onClick:()=>e(c),className:"cursor-pointer",children:A($,{icon:"multiply"})})})]})},tt=()=>{var e;return null===(e=crypto)||void 0===e?void 0:e.randomUUID()},rt=(e={},t)=>({id:tt(),...t,...e,isGroup:!1}),at=(e=[],t="and")=>({id:tt(),isGroup:!0,operator:t.toLowerCase(),rules:e}),st=({onAddCondition:e,onAddGroup:t,canAddGroup:r=!0,level:a=0})=>{const s=a>=2,n="text-gray-600 font-medium cursor-pointer hover:text-primary-600 text-sm";return M("div",{className:"flex gap-4",children:[A("span",{className:n,onClick:e,children:"+ Add condition"}),r&&(s?A(ne,{tooltipText:"Filter condition can only be nested three level deep",children:A("span",{className:"text-gray-400 text-sm cursor-not-allowed",children:"+ Add condition group"})}):A("span",{className:n,onClick:t,children:"+ Add condition group"}))]})},nt=({value:e,onChange:t})=>M(Q,{defaultValue:e.toUpperCase(),onValueChange:e=>t(e.toLowerCase()),children:[A(K,{iconClassName:"h-3 w-3 text-gray-500",className:"border-0 border-b-[1px] shadow-none focus:ring-0 text-sm pl-0 text-gray-600 w-[55px]",children:A(X,{})}),M(re,{children:[A(ae,{value:"AND",children:"and"}),A(ae,{value:"OR",children:"or"})]})]}),lt=({group:e,onChange:t,onRemove:r,keys:a,types:s,options:n,defaultCondition:l,keysMeta:i,level:o=0,isRoot:d=!1})=>{const c=e.rules||[],u=e.operator||e.logic||"and",m=(r,a)=>{const s=c.map(e=>e.id===r?a:e);t({...e,rules:s})},p=r=>{const a=c.filter(e=>e.id!==r);t({...e,rules:a})},h=r=>{t({...e,rules:[...c,r]})},f=r=>{t({...e,operator:r.toLowerCase()})},g=!d,y=!d,b=0===c.length;return M("div",{className:U("flex flex-col gap-4",g&&"rounded-sm py-2 px-4 border bg-gray-100"),children:[b&&y&&A("div",{className:"text-sm font-light",children:"Add conditions or sub-groups."}),c.map((e,t)=>M("div",{className:"flex gap-2 items-start",children:[0===t?A("span",{className:"w-[55px] pt-2 text-sm font-medium text-gray-700",children:"Where"}):1===t?A(nt,{value:u,onChange:f}):A("span",{className:"w-[55px] pt-2 text-sm text-gray-700",children:u}),A("div",{className:"flex-1",children:e.isGroup?A(lt,{group:e,onChange:t=>m(e.id,t),onRemove:()=>p(e.id),keys:a,types:s,options:n,defaultCondition:l,keysMeta:i,level:o+1,isRoot:!1}):A(et,{filter:e,handleFilterChange:(t,r)=>m(e.id,{...e,...r}),removeFilter:()=>p(e.id),types:s,keys:a,options:n,keysMeta:i})})]},e.id)),y&&M("div",{className:"flex justify-between gap-10 items-center pt-2 border-t border-gray-200",children:[A(st,{onAddCondition:()=>h(rt({},l)),onAddGroup:()=>h(at()),level:o}),A(ne,{tooltipText:"Remove group",children:A("button",{onClick:r,className:"text-gray-600 hover:text-gray-900 transition-colors",children:A($,{icon:"multiply"})})})]})]})},it=({onAddCondition:e,onAddGroup:t})=>M("div",{className:"flex gap-6",children:[A("span",{className:"text-gray-600 font-medium cursor-pointer hover:text-primary-600 text-sm",onClick:e,children:"+ Add condition"}),A("span",{className:"text-gray-600 font-medium cursor-pointer hover:text-primary-600 text-sm",onClick:t,children:"+ Add condition group"})]}),ot=e=>{if(!e)return null;if(!e.isGroup){const{id:t,isGroup:r,...a}=e;return a.key&&a.operator?a:null}const t=(e.rules||[]).map(e=>ot(e)).filter(Boolean);return 0===t.length?null:{operator:e.operator||"and",rules:t}},dt=e=>{return e&&e.operator&&Array.isArray(e.rules)?{id:null===(t=crypto)||void 0===t?void 0:t.randomUUID(),isGroup:!0,operator:e.operator,rules:e.rules.map(e=>{return e.operator&&e.rules?dt(e):{id:null===(t=crypto)||void 0===t?void 0:t.randomUUID(),isGroup:!1,...e};var t})}:null;var t},ct=({keys:e,types:t,initialFilters:a,updateFilters:n,options:l,defaultCondition:i,keysMeta:o,closePopover:d})=>{const[c,u]=r(()=>a?a.isGroup?a:dt(a):null),m=((null==c?void 0:c.rules)||[]).length>0,p=Boolean(c&&m),h=e=>{if(!c)return;const t=c.rules||[];u({...c,rules:[...t,e]})};return s(()=>{if(a){const e=a.isGroup?a:dt(a);u(e)}},[a]),M("div",{className:"text-slate-600 w-full",children:[M("div",{className:"flex items-center gap-2 mb-4",children:[A($,{icon:"filter",className:"text-primary-700",size:"lg"}),A("h2",{className:"text-lg font-medium text-gray-800",children:"Filter"})]}),c?M(D,{children:[p&&A("div",{className:"flex gap-2 items-start mb-4",children:A("div",{className:"flex-1",children:A(lt,{group:c,onChange:u,onRemove:()=>u(null),keys:e,types:t,options:l,defaultCondition:i,keysMeta:o,level:0,isRoot:!0})})}),M("div",{className:"flex justify-between items-center gap-10",children:[A(it,{onAddCondition:()=>h(rt({},i)),onAddGroup:()=>h(at())}),M(B,{className:"rounded-sm shadow-sm text-xs transition-all hover:shadow-md",onClick:()=>{const e=ot(c);n(e),d()},children:[A($,{icon:"filter",className:"mr-1",size:"sm"}),A("span",{children:"Apply"})]})]})]}):A(it,{onAddCondition:()=>{u(at([rt({},i)]))},onAddGroup:()=>{const e=at();u(at([e]))}})]})};function ut({className:e,closePopover:t,options:r,filterData:a,defaultCondition:s,filters:n,updateFilters:l,keysMeta:i}){return A("div",{className:U(e),children:A(ct,{keys:(null==a?void 0:a.fields)||[],types:(null==a?void 0:a.types)||{},initialFilters:n,updateFilters:l,options:r,defaultCondition:s,keysMeta:i,closePopover:t})})}function mt({options:e,filterData:t,defaultCondition:a,filters:s,updateFilters:n,keysMeta:l,filterProps:i}){const[o,d]=r(!1),c=i||{options:e||{},filterData:t,defaultCondition:a,filters:s,updateFilters:n,keysMeta:l},u=Be(c.filters);return c.filterData?M(J,{className:"z-10",style:{zIndex:10},open:o,onOpenChange:()=>d(!o),children:[A(Z,{asChild:!0,children:M(B,{className:"rounded-sm h-10 w-10 text-lg shadow-lg relative",children:[A($,{icon:"filter"}),u>0&&A("span",{className:"absolute top-0 right-0 text-xs bg-primary-600 text-white rounded-full w-5 h-5 flex items-center justify-center text-center -mr-2 -mt-2",children:u})]})}),A(q,{className:"max-w-[60vw] w-auto max-h-[70vh] overflow-y-auto rounded-none bg-gray-50 border-t-2 border-t-primary-700 p-6",children:A(le,{children:A(ut,{closePopover:()=>d(!1),options:c.options,filterData:c.filterData,defaultCondition:c.defaultCondition,filters:c.filters,updateFilters:c.updateFilters,keysMeta:c.keysMeta})})})]}):null}function pt({value:e,onChange:t,placeholder:r="Search..."}){return M("div",{className:"relative w-full max-w-sm group",children:[A(u,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 group-focus-within:text-primary-500 transition-colors"}),A("input",{type:"text",value:e,onChange:e=>t(e.target.value),placeholder:r,className:"w-full h-10 pl-9 pr-9 text-sm border border-slate-300 rounded-sm bg-white text-slate-700 placeholder:text-slate-400 focus:outline-none focus:border-primary-500/50"}),e&&A("button",{onClick:()=>t(""),className:"absolute right-2.5 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 transition-colors",children:A(m,{className:"w-3.5 h-3.5"})})]})}function ht(){return M("div",{className:"flex flex-col items-center justify-center py-20",children:[M("div",{className:"relative",children:[A("div",{className:"w-16 h-16 border-4 border-slate-200 rounded-full"}),A("div",{className:"w-16 h-16 border-4 border-primary-600 rounded-full border-t-transparent animate-spin absolute top-0 left-0"})]}),A("h3",{className:"text-base font-semibold text-slate-900 mt-6 mb-1",children:"Loading data"}),A("p",{className:"text-sm text-slate-500",children:"Please wait while we fetch your data"})]})}function ft({error:e,onRetry:t}){return M("div",{className:"flex flex-col items-center justify-center py-20",children:[A("div",{className:"w-16 h-16 mb-4 rounded-full bg-red-50 flex items-center justify-center",children:A(p,{className:"w-8 h-8 text-red-600"})}),A("h3",{className:"text-base font-semibold text-slate-900 mb-1",children:"Unable to load data"}),A("p",{className:"text-sm text-slate-500 mb-6",children:e}),t&&A("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-sm hover:bg-primary-700 transition-colors shadow-sm",children:"Try again"})]})}function gt({message:e="No data available",isFiltered:t}){return M("div",{className:"flex flex-col items-center justify-center py-20",children:[A("div",{className:"w-16 h-16 mb-4 rounded-full bg-slate-50 flex items-center justify-center",children:A(t?u:h,{className:"w-8 h-8 text-slate-400"})}),A("h3",{className:"text-base font-semibold text-slate-900 mb-1",children:t?"No results found":"No data available"}),A("p",{className:"text-sm text-slate-500",children:t?"Try adjusting your search or filters":e})]})}function yt(e){if(Array.isArray(e))return e;if("object"==typeof e&&null!==e){const t=["data","results","items","list","records","rows"];for(const r of t)if(Array.isArray(e[r]))return e[r];const r=Object.values(e).filter(e=>Array.isArray(e));return r.length>0?r.flat():[e]}return[]}function bt(e,t){if(!t||!t.fields)return t;const r={...t};return t.fields.forEach(t=>{if("select"===t.type&&!r[t.path]){const a=new Set;e.forEach(e=>{const r=(s=e,t.path.split(".").reduce((e,t)=>null==e?void 0:e[t],s));var s;null!=r&&""!==r&&a.add(String(r))}),r[t.path]=Array.from(a).sort().map(e=>({path:e,label:e}))}}),r}function xt({table:e,rowsPerPageOptions:t=[5,10,25,50]}){const r=e.getState().pagination.pageIndex,a=e.getPageCount(),s=e.getState().pagination.pageSize,n=e.getFilteredRowModel().rows.length,l=0===n?0:r*s+1,i=Math.min((r+1)*s,n),o=function(e,t){const r=[];if(t<=7)for(let e=0;e<t;e++)r.push(e);else if(r.push(0),e<=2){for(let e=1;e<=4;e++)r.push(e);r.push("ellipsis"),r.push(t-1)}else if(e>=t-3){r.push("ellipsis");for(let e=t-5;e<t-1;e++)r.push(e);r.push(t-1)}else{r.push("ellipsis");for(let t=e-1;t<=e+1;t++)r.push(t);r.push("ellipsis"),r.push(t-1)}return r}(r,a);return M("div",{className:"flex items-center justify-between px-6 py-4 border-t border-slate-200 bg-slate-50",children:[A("div",{className:"flex items-center gap-2 text-sm min-w-[140px]",children:M("span",{className:"text-slate-600",children:["Showing ",A("span",{className:"font-semibold text-slate-500",children:l})," to"," ",A("span",{className:"font-semibold text-slate-500",children:i})," of"," ",A("span",{className:"font-semibold text-slate-500",children:n})," results"]})}),M("div",{className:"flex items-center gap-1",children:[A("button",{onClick:()=>e.setPageIndex(0),disabled:!e.getCanPreviousPage(),className:"p-2 rounded-sm border border-slate-200 bg-white hover:bg-slate-50 disabled:opacity-40 disabled:cursor-not-allowed disabled:hover:bg-white transition-all","aria-label":"First page",children:A(f,{className:"w-4 h-4 text-slate-600"})}),A("button",{onClick:()=>e.previousPage(),disabled:!e.getCanPreviousPage(),className:"p-2 rounded-sm border border-slate-200 bg-white hover:bg-slate-50 disabled:opacity-40 disabled:cursor-not-allowed disabled:hover:bg-white transition-all","aria-label":"Previous page",children:A(g,{className:"w-4 h-4 text-slate-600"})}),A("div",{className:"flex items-center gap-1 mx-2",children:o.map((t,a)=>"ellipsis"===t?A("div",{className:"px-2 flex items-center",children:A("span",{className:"text-slate-400 font-medium",children:"..."})},`ellipsis-${a}`):A("button",{onClick:()=>e.setPageIndex(t),className:"min-w-[2.5rem] h-10 px-3 rounded-sm font-medium text-sm transition-all "+(r===t?"bg-primary-700 text-white shadow-sm":"bg-white text-slate-700 border border-slate-200 hover:bg-slate-50 hover:border-slate-300"),"aria-label":`Page ${t+1}`,"aria-current":r===t?"page":void 0,children:t+1},t))}),A("button",{onClick:()=>e.nextPage(),disabled:!e.getCanNextPage(),className:"p-2 rounded-sm border border-slate-200 bg-white hover:bg-slate-50 disabled:opacity-40 disabled:cursor-not-allowed disabled:hover:bg-white transition-all","aria-label":"Next page",children:A(y,{className:"w-4 h-4 text-slate-600"})}),A("button",{onClick:()=>e.setPageIndex(a-1),disabled:!e.getCanNextPage(),className:"p-2 rounded-sm border border-slate-200 bg-white hover:bg-slate-50 disabled:opacity-40 disabled:cursor-not-allowed disabled:hover:bg-white transition-all","aria-label":"Last page",children:A(b,{className:"w-4 h-4 text-slate-600"})})]}),M("div",{className:"flex items-center gap-3 min-w-[140px] justify-end",children:[A("label",{htmlFor:"rows-per-page",className:"text-sm font-medium text-slate-600 whitespace-nowrap",children:"Rows per page"}),A("select",{id:"rows-per-page",value:s,onChange:t=>e.setPageSize(Number(t.target.value)),className:"px-2 py-2 border border-slate-200 rounded-sm bg-white text-slate-700 text-sm font-medium hover:border-slate-300 focus:outline-none focus:border-primary-500/50 cursor-pointer",children:t.map(e=>A("option",{value:e,children:e},e))})]})]})}function vt({data:e,columns:t=[],enableSorting:u=!0,enablePagination:m=!0,enableSearch:p=!1,enableFilter:h=!1,searchPlaceholder:f="Search...",filterConfig:g=null,pageSize:y=10,rowsPerPageOptions:b=[5,10,25,50],tableTitle:N="Data",tableSubtitle:C,onRowClick:k,className:S="",stickyHeader:$=!1,zebraStripes:D=!1,emptyMessage:_}){const[R,P]=r([]),[F,j]=r("string"==typeof e),[O,T]=r(null),[I,L]=r([]),[z,G]=r(""),[H,U]=r({pageIndex:0,pageSize:y}),[V,W]=r(g),{filteredData:Y,filterProps:B,hasActiveFilters:E}=function(e=[],t=null){var s;const[n,l]=r(null),i=a(()=>{var e,r;if(null==t||!t.fields)return{fieldMeta:null,keysMeta:{},filterData:null,defaultCondition:null};const{fields:a}=t,s={all:{map:a.reduce((e,t)=>(e[t.path]={label:t.label,type:t.type||"string"},e),{})}},n=a.reduce((e,t)=>(e[t.path]={label:t.label,type:t.type||"string",multiple:t.multiple??!1},e),{});return{fieldMeta:s,keysMeta:n,filterData:{types:a.reduce((e,t)=>(e[t.path]=t.type||"string",e),{}),fields:a},defaultCondition:t.defaultCondition?{id:t.defaultCondition.key,key:t.defaultCondition.key,label:(null===(e=n[t.defaultCondition.key])||void 0===e?void 0:e.label)||t.defaultCondition.key,operator:t.defaultCondition.operator,value:t.defaultCondition.value,type:(null===(r=n[t.defaultCondition.key])||void 0===r?void 0:r.type)||"string",isGroup:!1}:null}},[t]),o=a(()=>{if(!t)return{};const e={};return Object.keys(t).forEach(r=>{Array.isArray(t[r])&&(e[r]=t[r])}),e},[t]),d=a(()=>n&&i.fieldMeta?Ye(e,n,0,i.fieldMeta):e,[e,n,i.fieldMeta]),c=a(()=>!!n&&(Array.isArray(n)?n.length>0:!!n.rules&&n.rules.length>0),[n]),u=i.filterData?{filterData:i.filterData,defaultCondition:i.defaultCondition,filters:n,updateFilters:l,keysMeta:i.keysMeta,options:o}:null;return{filteredData:d,filters:n,setFilters:l,filterProps:u,clearFilters:()=>l(null),hasActiveFilters:c,filterCount:c?Array.isArray(n)?n.length:(null===(s=n.rules)||void 0===s?void 0:s.length)||0:0}}(R,V);s(()=>{(async()=>{if("string"==typeof e){j(!0),T(null);try{const t=await fetch(e);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const r=yt(await t.json());if(P(r),h&&g){const e=bt(r,g);W(e)}}catch(e){T(e.message),P([])}finally{j(!1)}}else{const t=yt(e);if(P(t),j(!1),h&&g){const e=bt(t,g);W(e)}}})()},[e]);const J=n({data:Y,columns:t,state:{sorting:I,globalFilter:z,pagination:H},onSortingChange:L,onGlobalFilterChange:G,onPaginationChange:U,getCoreRowModel:d(),getSortedRowModel:o(),getFilteredRowModel:i(),getPaginationRowModel:l(),enableSorting:u,globalFilterFn:"includesString"}),Z=J.getFilteredRowModel().rows.length>0,q=""!==z||E;return A("div",{className:`w-full ${S}`,children:M("div",{className:"bg-white rounded-sm border border-slate-200 shadow-lg overflow-hidden",children:[(N||p||h)&&A("div",{className:"px-6 py-5 bg-slate-50",children:M("div",{className:"flex items-center justify-between gap-6",children:[N&&M("div",{className:"flex-shrink-0",children:[A("h2",{className:"text-xl font-semibold text-slate-900",children:N}),C&&A("p",{className:"text-sm text-slate-500 mt-1",children:C})]}),M("div",{className:"flex items-center gap-3 flex-1 justify-end",children:[p&&!F&&!O&&A(pt,{value:z,onChange:G,placeholder:f}),h&&B&&!F&&!O&&A(mt,{filterProps:B})]})]})}),A("div",{className:"overflow-x-auto "+($?"max-h-[600px] overflow-y-auto":""),children:F?A(ht,{}):O?A(ft,{error:O,onRetry:()=>"string"==typeof e&&P([])}):M("table",{className:"w-full",children:[A("thead",{className:"bg-slate-50 backdrop-blur-sm "+($?"sticky top-0 z-10":""),children:J.getHeaderGroups().map(e=>A("tr",{className:"border-b-2 border-slate-200",children:e.headers.map(e=>A("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-700 uppercase tracking-wider",children:e.isPlaceholder?null:M("div",{className:"flex items-center gap-2 "+(e.column.getCanSort()?"cursor-pointer select-none group":""),onClick:e.column.getToggleSortingHandler(),children:[c(e.column.columnDef.header,e.getContext()),u&&e.column.getCanSort()&&A("span",{className:"text-slate-400 group-hover:text-slate-600 transition-colors",children:"asc"===e.column.getIsSorted()?A(x,{className:"w-4 h-4 text-primary-600"}):"desc"===e.column.getIsSorted()?A(v,{className:"w-4 h-4 text-primary-600"}):A(w,{className:"w-4 h-4"})})]})},e.id))},e.id))}),A("tbody",{className:"divide-y divide-slate-100",children:R.length>0&&Z?J.getRowModel().rows.map((e,t)=>A("tr",{onClick:()=>null==k?void 0:k(e.original),className:`transition-all ${D&&t%2==1?"bg-slate-50/40":"bg-white"} ${k?"cursor-pointer hover:bg-primary-50/50 hover:shadow-sm":"hover:bg-slate-50/50"}`,children:e.getVisibleCells().map(e=>A("td",{className:"px-6 py-4 text-sm text-slate-700",children:c(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):A("tr",{children:A("td",{colSpan:t.length,children:A(gt,{message:_,isFiltered:q})})})})]})}),m&&!F&&!O&&R.length>0&&Z&&A(xt,{table:J,rowsPerPageOptions:b})]})})}export{vt as DataTable};
//# sourceMappingURL=index.esm.js.map
