{"version":3,"file":"index.esm.js","sources":["../src/FilterSection.js","../src/FilterItem.js","../src/FilterPanel.js","../src/FilterUtils.js","../src/DatasetFilter.js","../src/index.js"],"sourcesContent":["import { useState } from \"react\";\r\nimport { ChevronDown } from \"lucide-react\";\r\n\r\nexport const FilterSection = ({ label, isNested = false, children, defaultExpanded = true }) => {\r\n  const [isExpanded, setIsExpanded] = useState(defaultExpanded);\r\n\r\n  const HeadingTag = isNested ? 'h4' : 'h3';\r\n  const headingClass = isNested\r\n    ? \"text-xs font-medium text-gray-700 pb-2\"\r\n    : \"text-[13px] font-semibold text-gray-800 tracking-wide uppercase pb-2\";\r\n\r\n  const containerClass = isNested ? \"\" : \" mb-3 border-b border-gray-200\";\r\n\r\n  return (\r\n    <div className={containerClass}>\r\n      <button\r\n        onClick={() => setIsExpanded(!isExpanded)}\r\n        className=\"w-full flex justify-between group\"\r\n      >\r\n        <HeadingTag className={headingClass}>{label}</HeadingTag>\r\n        <ChevronDown className={`w-5 h-5 text-gray-600 hover:text-primary-600 transition-transform ${isExpanded ? 'rotate-180' : ''}`} />\r\n      </button>\r\n\r\n      {isExpanded && <div className=\"mb-3 space-y-0.5\">{children}</div>}\r\n    </div>\r\n  );\r\n};\r\n","import { useCallback, useMemo, useState } from 'react';\r\nimport { Search, X } from 'lucide-react';\r\nimport { FilterSection } from './FilterSection';\r\n\r\nexport const CheckboxItem = ({ checked, onChange, label }) => {\r\n  return (\r\n    <label className=\"flex items-start gap-3 cursor-pointer group w-fit\">\r\n      <input\r\n        type=\"checkbox\"\r\n        checked={checked}\r\n        onChange={onChange}\r\n        className=\"mt-0.5 w-4 h-4 rounded-sm border-gray-300 accent-primary-600 focus:ring-primary-500 cursor-pointer transition-colors group-hover:border-primary-600\"\r\n      />\r\n      <span className=\"text-sm text-gray-900 font-light group-hover:text-primary-600 transition-colors\">\r\n        {label}\r\n      </span>\r\n    </label>\r\n  );\r\n};\r\n\r\nexport const CheckboxGroupFilter = ({ config = {}, value = [], onChange, isNested = false }) => {\r\n  const [showAll, setShowAll] = useState(false);\r\n  \r\n  const toggleOption = useCallback((option) => {\r\n    const newValue = value.includes(option) ? value.filter(v => v !== option) : [...value, option];\r\n    onChange(newValue.length ? newValue : undefined);\r\n  }, [value, onChange]);\r\n\r\n  if (!config.options || config.options.length === 0) return null;\r\n\r\n  const MAX_VISIBLE = 5;\r\n  const visibleOptions = showAll ? config.options : config.options.slice(0, MAX_VISIBLE);\r\n\r\n  return (\r\n    <FilterSection label={config.label} isNested={isNested}>\r\n      {visibleOptions.map(option => (\r\n        <CheckboxItem\r\n          key={option}\r\n          label={option}\r\n          checked={value?.includes(option) || false}\r\n          onChange={() => toggleOption(option)}\r\n        />\r\n      ))}\r\n\r\n      {config.options.length > MAX_VISIBLE && (\r\n        <button\r\n          onClick={() => setShowAll(!showAll)}\r\n          className=\"mt-2 text-primary-600 hover:text-primary-500 text-xs inline-flex items-center gap-1 underline\"\r\n        >\r\n          {showAll ? 'See less' : 'See all'}\r\n        </button>\r\n      )}\r\n    </FilterSection>\r\n  );\r\n};\r\n\r\n\r\nexport const RangeFilter = ({ config, value = [], onChange, isNested = false }) => {\r\n  const toggleRange = useCallback((label) => {\r\n    const newValue = value.includes(label) ? value.filter(v => v !== label) : [...value, label];\r\n    onChange(newValue.length ? newValue : undefined);\r\n  }, [value, onChange]);\r\n\r\n  if (!config.ranges?.length) return null;\r\n\r\n  return (\r\n    <FilterSection label={config.label} isNested={isNested}>\r\n      {config.ranges.map(range => (\r\n        <CheckboxItem\r\n          key={range.label}\r\n          label={range.label}\r\n          checked={value?.includes(range.label) || false}\r\n          onChange={() => toggleRange(range.label)}\r\n        />\r\n      ))}\r\n    </FilterSection>\r\n  );\r\n};\r\n\r\nexport const CheckboxFilter = ({ config, value = false, onChange }) => {\r\n  return (\r\n    <div>\r\n      <CheckboxItem\r\n        checked={!!value}\r\n        onChange={(e) => onChange(e.target.checked ? true : undefined)}\r\n        label={config.label}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const NestedGroupFilter = ({ config, filters, onFilterChange, defaultExpanded = true }) => {\r\n  if (!config.children || config.children.length === 0) return null;\r\n\r\n  return (\r\n    <FilterSection label={config.label} defaultExpanded={defaultExpanded}>\r\n      {config.children.map(childKey => {\r\n        const childConfig = config.childrenSchema[childKey];\r\n        if (!childConfig) return null;\r\n\r\n        if (childConfig.type === \"checkbox-group\") {\r\n          return (\r\n            <CheckboxGroupFilter\r\n              key={childKey}\r\n              config={childConfig}\r\n              value={filters[childKey]}\r\n              onChange={(val) => onFilterChange(childKey, val)}\r\n              isNested={true}\r\n            />\r\n          );\r\n        }\r\n\r\n        if (childConfig.type === \"range\") {\r\n          return (\r\n            <RangeFilter\r\n              key={childKey}\r\n              config={childConfig}\r\n              value={filters[childKey]}\r\n              onChange={(val) => onFilterChange(childKey, val)}\r\n              isNested={true}\r\n            />\r\n          );\r\n        }\r\n\r\n        return null;\r\n      })}\r\n    </FilterSection>\r\n  );\r\n};\r\n\r\nexport const FilterBadges = ({ schema, filters, onRemove }) => {\r\n  const badges = useMemo(() => {\r\n    const result = [];\r\n\r\n    const extractBadges = (schemaObj) => {\r\n      Object.entries(schemaObj).forEach(([key, config]) => {\r\n        if (config.type === \"group\" && config.childrenSchema) {\r\n          extractBadges(config.childrenSchema);\r\n          return;\r\n        }\r\n\r\n        const value = filters[key];\r\n        if (!value) return;\r\n\r\n        if (config.type === \"search\") {\r\n          result.push({ key, label: value, type: \"search\" });\r\n        } else if (config.type === \"checkbox\" && value === true) {\r\n          result.push({ key, label: config.label, type: \"checkbox\" });\r\n        } else if (Array.isArray(value) && value.length > 0) {\r\n          value.forEach(val => result.push({ key, label: val, type: \"array\", value: val }));\r\n        }\r\n      });\r\n    };\r\n\r\n    extractBadges(schema);\r\n    return result;\r\n  }, [schema, filters]);\r\n\r\n  if (!badges.length) return null;\r\n\r\n  return (\r\n    <div className=\"flex flex-wrap gap-2 mt-3\">\r\n      {badges.map(badge => (\r\n        <span key={`${badge.key}-${badge.value || ''}`} className=\"inline-flex items-center gap-1.5 px-2 py-1 bg-primary-100/80 text-gray-700 text-sm border\">\r\n          <span>{badge.label}</span>\r\n          <button onClick={() => onRemove(badge)} className=\"hover:text-primary-600 rounded-full p-0.5 transition-colors\">\r\n            <X className=\"w-3.5 h-3.5\" />\r\n          </button>\r\n        </span>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const SearchHeader = ({ schema, filters, onFilterChange }) => {\r\n  const searchConfigEntry = Object.entries(schema).find(([_, c]) => c.type === \"search\");\r\n  if (!searchConfigEntry) return null;\r\n\r\n  const [searchKey, searchSchema] = searchConfigEntry;\r\n  const searchValue = filters[searchKey] || \"\";\r\n\r\n  const removeBadge = (badge) => {\r\n    if (badge.type === \"search\") onFilterChange(badge.key, \"\");\r\n    else if (badge.type === \"array\") {\r\n      const newValues = (filters[badge.key] || []).filter(v => v !== badge.value);\r\n      onFilterChange(badge.key, newValues.length ? newValues : undefined);\r\n    } else if (badge.type === \"checkbox\") {\r\n      onFilterChange(badge.key, undefined);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"mb-6\">\r\n      <div className=\"relative\">\r\n        <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400\" />\r\n        <input\r\n          type=\"text\"\r\n          placeholder={searchSchema.placeholder}\r\n          value={searchValue}\r\n          onChange={(e) => onFilterChange(searchKey, e.target.value)}\r\n          className=\"w-full pl-10 pr-10 py-3 border border-gray-400/70 focus:ring-1 focus:ring-primary-500 focus:border-transparent outline-none text-sm\"\r\n        />\r\n        {searchValue && (\r\n          <button onClick={() => onFilterChange(searchKey, \"\")} className=\"absolute right-3 top-1/2 -translate-y-1/2\">\r\n            <X className=\"w-4 h-4 text-gray-400 hover:text-gray-600\" />\r\n          </button>\r\n        )}\r\n      </div>\r\n\r\n      <FilterBadges schema={schema} filters={filters} onRemove={removeBadge} />\r\n    </div>\r\n  );\r\n};","import React from 'react';\r\nimport { ChevronDown, SlidersHorizontal } from 'lucide-react';\r\nimport { CheckboxFilter, CheckboxGroupFilter, NestedGroupFilter, RangeFilter } from \"./FilterItem\";\r\n\r\nexport const FilterPanel = ({ schema, filters, onFilterChange }) => {\r\n  const [generalExpanded, setGeneralExpanded] = React.useState(true);\r\n\r\n  const renderFilter = (key, config) => {\r\n    if (config.type === \"search\") return null;\r\n\r\n    if (config.type === \"group\") {\r\n      return (\r\n        <NestedGroupFilter\r\n          key={key}\r\n          config={config}\r\n          filters={filters}\r\n          onFilterChange={onFilterChange}\r\n        />\r\n      );\r\n    }\r\n\r\n    if (config.type === \"checkbox-group\") {\r\n      return (\r\n        <CheckboxGroupFilter\r\n          key={key}\r\n          config={config}\r\n          value={filters[key]}\r\n          onChange={(value) => onFilterChange(key, value)}\r\n        />\r\n      );\r\n    }\r\n\r\n    if (config.type === \"range\") {\r\n      return (\r\n        <RangeFilter\r\n          key={key}\r\n          config={config}\r\n          value={filters[key]}\r\n          onChange={(value) => onFilterChange(key, value)}\r\n        />\r\n      );\r\n    }\r\n\r\n    return null;\r\n  };\r\n\r\n  const standaloneCheckboxes = Object.entries(schema).filter(\r\n    ([, config]) => config.type === \"checkbox\"\r\n  );\r\n\r\n  return (\r\n    <div className=\"w-72 bg-white border-r border-gray-200 h-screen overflow-y-auto p-6 sticky top-0 custom-scroll\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center gap-2 mb-6\">\r\n        <SlidersHorizontal className=\"w-5 h-5 text-primary-600\" />\r\n        <h2 className=\"text-lg font-semibold text-gray-900 tracking-tight\">Filters</h2>\r\n      </div>\r\n\r\n      {/* General group for standalone checkboxes */}\r\n      {standaloneCheckboxes.length > 0 && (\r\n        <div className=\"pb-3 mb-3 border-b border-gray-200\">\r\n          <button\r\n            onClick={() => setGeneralExpanded(!generalExpanded)}\r\n            className=\"w-full flex items-center justify-between group\"\r\n          >\r\n            <h3 className=\"text-[13px] font-semibold text-gray-800 tracking-wide uppercase\">\r\n              General\r\n            </h3>\r\n            <ChevronDown \r\n              className={`w-5 h-5 text-gray-600 hover:text-primary-600 transition-transform ${generalExpanded ? 'rotate-180' : ''}`} \r\n            />\r\n          </button>\r\n\r\n          {generalExpanded && (\r\n            <div className=\"space-y-0.5 mt-2\">\r\n              {standaloneCheckboxes.map(([key, config]) => (\r\n                <CheckboxFilter\r\n                  key={key}\r\n                  config={config}\r\n                  value={filters[key]}\r\n                  onChange={(val) => onFilterChange(key, val)}\r\n                />\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {Object.entries(schema).map(([key, config]) => renderFilter(key, config))}\r\n    </div>\r\n  );\r\n};\r\n","export const getNestedValue = (obj, path) => {\r\n  if (!obj || !path) return null;\r\n  return path.split('.').reduce((acc, key) => (acc != null ? acc[key] : null), obj);\r\n};\r\n\r\nexport const cleanFilters = (filters) => {\r\n  return Object.fromEntries(\r\n    Object.entries(filters).filter(\r\n      ([, value]) =>\r\n        value !== undefined &&\r\n        value !== null &&\r\n        value !== \"\" &&\r\n        !(Array.isArray(value) && value.length === 0) &&\r\n        value !== false\r\n    )\r\n  );\r\n};\r\n\r\nexport const encodeFilters = (filters) => {\r\n  try {\r\n    const cleaned = cleanFilters(filters);\r\n    return Object.keys(cleaned).length ? btoa(encodeURIComponent(JSON.stringify(cleaned))) : \"\";\r\n  } catch {\r\n    return \"\";\r\n  }\r\n};\r\n\r\nexport const decodeFilters = (encoded) => {\r\n  try {\r\n    return JSON.parse(decodeURIComponent(atob(encoded)));\r\n  } catch {\r\n    return {};\r\n  }\r\n};\r\n\r\nexport const flattenSchema = (schema) => {\r\n  const flat = {};\r\n  let search = null;\r\n\r\n  const helper = (obj) => {\r\n    Object.entries(obj).forEach(([key, config]) => {\r\n      if (!config) return;\r\n\r\n      const type = String(config.type).toLowerCase();\r\n      if (type === \"group\" && config.childrenSchema) {\r\n        helper(config.childrenSchema);\r\n      } else if (type === \"search\") {\r\n        search = { key, config };\r\n      } else {\r\n        flat[key] = config;\r\n      }\r\n    });\r\n  };\r\n\r\n  helper(schema);\r\n  return { flat, search };\r\n};\r\n\r\nconst handlers = {\r\n  \"checkbox-group\": (itemValue, filterValue, config) => {\r\n    if (config.transform && itemValue != null) itemValue = config.transform(itemValue);\r\n    const itemArray = Array.isArray(itemValue) ? itemValue : [itemValue];\r\n    const selected = Array.isArray(filterValue) ? filterValue : [filterValue];\r\n\r\n    const normalizedItem = itemArray.map(v => v ? String(v).toLowerCase() : v);\r\n    const normalizedSelected = selected.map(v => v ? String(v).toLowerCase() : v);\r\n\r\n    if (normalizedSelected.includes(\"other\") && config.options) {\r\n      const optionsLower = config.options.map(o => o.toLowerCase());\r\n      if (normalizedItem.some(v => v && !optionsLower.includes(v))) return true;\r\n    }\r\n\r\n    return normalizedSelected.some(v => normalizedItem.includes(v));\r\n  },\r\n\r\n  range: (itemValue, filterValue, config) => {\r\n    const num = Number(itemValue);\r\n    if (isNaN(num)) return false;\r\n    return filterValue.some(label => {\r\n      const range = config.ranges?.find(r => r.label === label);\r\n      return range ? num >= range.min && num <= range.max : false;\r\n    });\r\n  },\r\n\r\n  checkbox: (itemValue, filterValue) => filterValue ? !!itemValue : true\r\n};\r\n\r\nexport const applyFilters = (data, filters, schema) => {\r\n  if (!Array.isArray(data) || !data.length) return [];\r\n  if (!filters || !Object.keys(filters).length) return data;\r\n\r\n  const { flat, search } = flattenSchema(schema);\r\n\r\n  return data.filter(item => {\r\n    if (search && filters[search.key]?.trim()) {\r\n      const term = filters[search.key].toLowerCase();\r\n      const fields = Array.isArray(search.config.fields) ? search.config.fields : [search.config.field];\r\n      const matches = fields.some(f => {\r\n        const val = getNestedValue(item, f);\r\n        if (Array.isArray(val)) return val.some(v => String(v || \"\").toLowerCase().includes(term));\r\n        return String(val || \"\").toLowerCase().includes(term);\r\n      });\r\n      if (!matches) return false;\r\n    }\r\n\r\n    return Object.entries(filters).every(([key, value]) => {\r\n      if (search && key === search.key) return true; \r\n      if (!value || (Array.isArray(value) && !value.length)) return true;\r\n\r\n      const config = flat[key];\r\n      if (!config) return true;\r\n\r\n      let itemValue = getNestedValue(item, config.field);\r\n      const handler = handlers[config.type];\r\n      return handler ? handler(itemValue, value, config) : true;\r\n    });\r\n  });\r\n};\r\n\r\nexport const extractDynamicOptions = (data, schema) => {\r\n  const { flat } = flattenSchema(schema);\r\n  const options = {};\r\n\r\n  Object.entries(flat).forEach(([key, config]) => {\r\n    if (config.options?.length) return;\r\n    if (!['checkbox-group', 'checkbox'].includes(config.type)) return;\r\n\r\n    const set = new Set();\r\n    data.forEach(item => {\r\n      let val = getNestedValue(item, config.field);\r\n      if (config.transform && val != null) val = config.transform(val);\r\n\r\n      if (config.isArray && Array.isArray(val)) {\r\n        val.forEach(v => v != null && set.add(String(v)));\r\n      } else if (val != null) {\r\n        set.add(String(val));\r\n      }\r\n    });\r\n\r\n    options[key] = Array.from(set).sort();\r\n  });\r\n\r\n  return options;\r\n};\r\n\r\nexport const updateSchemaWithDynamicOptions = (schema, data) => {\r\n  const dynamicOptions = extractDynamicOptions(data, schema);\r\n\r\n  const update = (obj) => {\r\n    return Object.fromEntries(\r\n      Object.entries(obj).map(([key, config]) => {\r\n        if (!config) return [key, config];\r\n        const newConfig = { ...config };\r\n\r\n        if (config.type === \"group\" && config.childrenSchema) {\r\n          newConfig.childrenSchema = update(config.childrenSchema);\r\n        } else if (dynamicOptions[key]?.length) {\r\n          newConfig.options = dynamicOptions[key];\r\n        }\r\n\r\n        return [key, newConfig];\r\n      })\r\n    );\r\n  };\r\n\r\n  return update(schema);\r\n};\r\n","import { useState, useMemo, useCallback, useEffect } from \"react\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { FilterPanel } from \"./FilterPanel\";\r\nimport { SearchHeader } from \"./FilterItem\";\r\nimport { applyFilters, updateSchemaWithDynamicOptions, decodeFilters, encodeFilters } from \"./FilterUtils\";\r\nimport { Loader2 } from \"lucide-react\";\r\n\r\nexport const DatasetFilter = ({\r\n  schema,\r\n  data = null, // Static data (if provided, no fetching)\r\n  url = null, // URL for fetching data\r\n  queryKey = null, // Optional custom query key\r\n  queryFn = null, // Optional custom query function\r\n  dataTransform = null, // Optional custom data transform\r\n  renderContent,\r\n  enableUrlSync = true,\r\n  queryOptions = {},\r\n  className = \"\"\r\n}) => {\r\n  const [filters, setFilters] = useState({});\r\n\r\n  // Internal query function\r\n  const internalQueryFn = useCallback(async () => {\r\n    if (queryFn) return queryFn();\r\n    \r\n    if (!url) {\r\n      throw new Error(\"Either data, url, or queryFn must be provided\");\r\n    }\r\n\r\n    const res = await fetch(url);\r\n    if (!res.ok) throw new Error(`Failed to fetch data: ${res.statusText}`);\r\n    return res.json();\r\n  }, [url, queryFn]);\r\n\r\n  // Internal data transform that handles common response structures\r\n  const internalDataTransform = useCallback((result) => {\r\n    if (dataTransform) return dataTransform(result);\r\n    if (!result) return [];\r\n    // Handle common response formats\r\n    return result.list || result.data || result;\r\n  }, [dataTransform]);\r\n\r\n  // Generate query key\r\n  const generatedQueryKey = useMemo(() => {\r\n    if (queryKey) return queryKey;\r\n    if (url) return ['dataset-url', url];\r\n    return ['dataset'];\r\n  }, [queryKey, url]);\r\n\r\n  // Determine if we should fetch data (must be a boolean)\r\n  const shouldFetch = Boolean(!data && (url || queryFn));\r\n\r\n  const { data: fetchedData, isLoading, error } = useQuery({\r\n    queryKey: generatedQueryKey,\r\n    queryFn: internalQueryFn,\r\n    enabled: shouldFetch,\r\n    staleTime: 5 * 60 * 1000, // Cache for 5 minutes\r\n    ...queryOptions\r\n  });\r\n\r\n  // Use static data or fetched data\r\n  const sourceData = useMemo(() => {\r\n    if (data) return Array.isArray(data) ? data : [];\r\n    return internalDataTransform(fetchedData) || [];\r\n  }, [data, fetchedData, internalDataTransform]);\r\n\r\n  const updatedSchema = useMemo(\r\n    () => updateSchemaWithDynamicOptions(schema, sourceData),\r\n    [schema, sourceData]\r\n  );\r\n\r\n  const filteredData = useMemo(\r\n    () => applyFilters(sourceData, filters, updatedSchema),\r\n    [sourceData, filters, updatedSchema]\r\n  );\r\n\r\n  const updateFilter = useCallback((key, value) => {\r\n    setFilters(prev => {\r\n      const newFilters = { ...prev };\r\n      if (\r\n        value === undefined ||\r\n        value === null ||\r\n        value === \"\" ||\r\n        (Array.isArray(value) && value.length === 0) ||\r\n        value === false\r\n      ) {\r\n        delete newFilters[key];\r\n      } else {\r\n        newFilters[key] = value;\r\n      }\r\n      return newFilters;\r\n    });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!enableUrlSync) return;\r\n    const params = new URLSearchParams(window.location.search);\r\n    const encoded = params.get(\"f\");\r\n    if (encoded) setFilters(decodeFilters(encoded));\r\n  }, [enableUrlSync]);\r\n\r\n  useEffect(() => {\r\n    if (!enableUrlSync) return;\r\n    const encoded = encodeFilters(filters);\r\n    if (!encoded) {\r\n      window.history.replaceState({}, \"\", window.location.pathname);\r\n      return;\r\n    }\r\n    const params = new URLSearchParams();\r\n    params.set(\"f\", encoded);\r\n    window.history.replaceState({}, \"\", `?${params.toString()}`);\r\n  }, [filters, enableUrlSync]);\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-screen\">\r\n        <div className=\"text-center\">\r\n          <Loader2 className=\"w-8 h-8 animate-spin text-primary-600 mx-auto mb-2\" />\r\n          <p className=\"text-gray-600\">Loading data...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-screen\">\r\n        <div className=\"text-center text-red-600\">\r\n          <p className=\"font-semibold mb-2\">Error loading data</p>\r\n          <p className=\"text-sm\">{error.message}</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={`flex min-h-screen bg-gray-50 ${className}`}>\r\n      <FilterPanel\r\n        schema={updatedSchema}\r\n        filters={filters}\r\n        onFilterChange={updateFilter}\r\n      />\r\n\r\n      <div className=\"flex-1 p-8\">\r\n        <div className=\"max-w-5xl mx-auto\">\r\n          <SearchHeader\r\n            schema={updatedSchema}\r\n            filters={filters}\r\n            onFilterChange={updateFilter}\r\n            onRemoveFilter={updateFilter}\r\n          />\r\n\r\n          {renderContent &&\r\n            renderContent({\r\n              filteredData,\r\n              totalData: sourceData,\r\n              filters,\r\n            })}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};","import { QueryClient, QueryClientProvider } from \"@tanstack/react-query\";\r\nimport { DatasetFilter as OriginalDatasetFilter } from \"./DatasetFilter\";\r\n\r\nconst defaultQueryClient = new QueryClient();\r\n\r\nexport const DatasetFilter = (props) => (\r\n  <QueryClientProvider client={defaultQueryClient}>\r\n    <OriginalDatasetFilter {...props} />\r\n  </QueryClientProvider>\r\n);\r\n"],"names":["FilterSection","label","isNested","children","defaultExpanded","isExpanded","setIsExpanded","useState","_jsxs","className","onClick","_jsx","ChevronDown","CheckboxItem","checked","onChange","type","CheckboxGroupFilter","config","value","showAll","setShowAll","toggleOption","useCallback","option","newValue","includes","filter","v","length","undefined","options","visibleOptions","slice","map","RangeFilter","_config$ranges","toggleRange","ranges","range","CheckboxFilter","e","target","NestedGroupFilter","filters","onFilterChange","childKey","childConfig","childrenSchema","val","FilterBadges","schema","onRemove","badges","useMemo","result","extractBadges","schemaObj","Object","entries","forEach","key","push","Array","isArray","badge","X","SearchHeader","searchConfigEntry","find","_","c","searchKey","searchSchema","searchValue","Search","placeholder","newValues","FilterPanel","generalExpanded","setGeneralExpanded","React","standaloneCheckboxes","SlidersHorizontal","renderFilter","getNestedValue","obj","path","split","reduce","acc","encodeFilters","cleaned","fromEntries","cleanFilters","keys","btoa","encodeURIComponent","JSON","stringify","flattenSchema","flat","search","helper","String","toLowerCase","handlers","checkbox-group","itemValue","filterValue","transform","itemArray","selected","normalizedItem","normalizedSelected","optionsLower","o","some","num","Number","isNaN","r","min","max","checkbox","updateSchemaWithDynamicOptions","data","dynamicOptions","extractDynamicOptions","_config$options","set","Set","item","field","add","from","sort","update","_dynamicOptions$key","newConfig","DatasetFilter","url","queryKey","queryFn","dataTransform","renderContent","enableUrlSync","queryOptions","setFilters","internalQueryFn","async","Error","res","fetch","ok","statusText","json","internalDataTransform","list","generatedQueryKey","shouldFetch","Boolean","fetchedData","isLoading","error","useQuery","enabled","staleTime","sourceData","updatedSchema","filteredData","applyFilters","_filters$search$key","trim","term","fields","f","every","handler","updateFilter","prev","newFilters","useEffect","encoded","URLSearchParams","window","location","get","parse","decodeURIComponent","atob","decodeFilters","history","replaceState","pathname","params","toString","Loader2","message","onRemoveFilter","totalData","defaultQueryClient","QueryClient","props","QueryClientProvider","client","OriginalDatasetFilter"],"mappings":"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"}